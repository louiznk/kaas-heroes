<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png">
		<title>Votre propre kube as a service ? Une aventure dont vous Ãªtes le hÃ©ros...</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/night.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">

		<style>
			body, .reveal {
				background-image: url(images/slide-background-znk.png);
				background-size: auto 100%;
				background-repeat: no-repeat;
			}
			.reveal li {
				font-size: 0.9em;
			}
			.reveal table th, .reveal table td {
				border-bottom: none;
			}
			.left {
				text-align: left;
				padding-left: 20px;
				padding-right: 20px;
			}
			.right {
				text-align: right;
				padding-left: 20px;
				padding-right: 20px;
			}
			.avatar {
				min-width: 7em;
			}
			.header {				
				padding: 10px;
				text-align: center;
				font-size: 66%;
			}
			.header-inner {				
				display: inline-block;
				padding: 10px;
			}
			.footer {				
				text-align: center;
				font-size: 50%;
				font-style: italic;
				position:absolute;
				right: 10px;
				bottom: 10px;
			}
			.very-small {
				font-size: 0.4em;
			}
			.small {
				font-size: 0.8em;
			}
			.big {
				font-size: 2em;
			}
			.img-rounded {
  				border-radius: 50%;
			}
			.reveal .aligncenter {
				margin: 10px auto 20px;
    			display: block;
			}
			.reveal .slides section > section {
				/* line-height: 1.3;
				font-weight: inherit; */
				text-shadow: 0.05em 0.05em 0.1em black
			}
			.reveal h3 {
				font-size: var(--r-heading3-size);
				text-shadow: 0.1em 0.1em 0.3em black
			}
			.reveal h6 {
				font-size: var(--r-heading6-size);
				text-shadow: 0.1em 0.1em 0.3em black
			}
			.hide {
				display: none;
				visibility: hidden;
			}
			.show {
				visibility: visible;
			}
			.finish {
				color: red;
				font-weight: bold;
				font-size:24px;
			}
			.alerte {
				color: red;
				font-weight: bold;
			}
			.warning {
				color: coral;
			}
			.lvl-up {
				position: absolute;
				box-sizing: border-box;
				top: 20%;
				left: 50%;
				text-align: center;
				transform: translate(-50%, -50%);
				font-size: 200%;
			}
			.lvl-down {
				position: absolute;
				box-sizing: border-box;
				top: 20%;
				left: 50%;
				text-align: center;
				transform: translate(-50%, -50%);
				font-size: 200%;
			}
			.score {
				color: rgb(250, 250, 250);
				font-size: 1.1em;
				text-shadow: 0.05em 0.05em 0.1em black
			}
			.red {
				color: red
			}
			.blue {
				color: blue
			}
			.black {
				color: black
			}
			.background-contrast {
				background-color:  #e7ad52;
				background-color:  grey;
				opacity: .8;
			}
			.white {
				color: white
			}
			.black-shadow {
				text-shadow: 0.1em 0.1em 0.2em black
			}
			.shell {
				font-family: monospace;
				font-size: 0.8em;
				color: beige;
			}
			.flex-container {
				display: flex;
				align-items: stretch;
				
			}
			.flex-container > div {
				margin: 10px;
				padding: 10px;				
				align-self: center;
				text-align: center;
				font-size: 35px;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="header">
				<div id="timer" class="header-inner">â³...</div>
				<div id="label-container" class="show header-inner">Level: 0, gold: 10</div>
			</div>
			<div class="slides">

				<div id="label-level" class="hide" /></div>

				<!-- 0 -->
				<section>
					<h2>Votre propre kube as a service ?</h2>
					<h3>Une aventure dont vous Ãªtes le hÃ©ros...</h3>
					<img src="images/jdr.png"/><br>
					Une collection Folio DevOps
					<p class="small">
						Revue des lecteurs/joueurs <u class="red">https://bit.ly/kaas-heros</u> <br />
					</p>
					<aside class="notes">
						-> Reminder sur le premier tome : vous rÃ©ussit Ã  sauver le site des problÃ¨mes de deploy en Ã©pousant la voie du GitOps<br />
						-> Vous Ãªtes maintenant un fan de gitops et tous vous dÃ©ployements sont gÃ©rÃ©s via Argo. <br />
					</aside>
				</section>
				<!-- 1 -->
				<section>
					<img src="images/twitter.png" style="margin: 0;" /><span style="font-size: 1.2em;"> @_louidji</span>
					<table>
						<tbody>
							<tr>
								<td><img src="images/louis.png" class="img-rounded aligncenter avatar"/></td>
							</tr>
							<tr>
								<td style="text-align: center;">Louis Tournayre @ Zenika Lyon &<br />GDG Cloud & IoT Lyon</td>
							</tr>
						</tbody>
					</table>
					<br>
					<aside class="notes">
						J'aurai le plaisir d'Ãªtre le MJ de cette partie de Dev And Deploy pour cette nouvelle aventure. <br />
						Car de nouveaux pÃ©riples vous attendent : vos succÃ¨s ont fait des envieux.
					</aside>
				</section>
				<!-- 2 -->
				<section data-background-image="images/midjourney-kubernetes-kingdom.png" data-background-size="50%">
					<!-- 
						source: https://www.midjourney.com/app/jobs/8fc23964-0b8e-484b-b29d-5efb36488c22/
						authors: midjourney / louidji
						prompt: From Tolkien a story beginning There once was a vast kingdom called Kubernetes. Drawn by RÃ©gis Loisel

					-->
					<section>
						<h3>Un nouvelle aventure</h3>
						<br />
						Il Ã©tait une fois le vaste royaume de <b>Kubernetes</b>, dans ce royaume existait un petit namespace qui avait pour capitale <b>le site</b> (et pas le sith).<br /><br />

						Ce nouveau territoire inspire et fait des envieux dans le royaume de l'infrastructure...
						
						<aside class="notes">
							Vous avez un sprint soit moins de 50 min pour rÃ©soudre cela... 
						</aside>
					</section>
					<section>
						<h3>Contenir l'invasion du Legacy</h3>
						<br />
						La guilde des dÃ©cideurs a dÃ©cidÃ© que ce royaume sera occupÃ© par... ses armÃ©es d'applications Legacy !<br />

						Tout en obÃ©issant Ã  la guilde des dÃ©cideurs il va falloir protÃ©ger vos clusters et votre site qui vous ont demandÃ© tant d'effort<br />
						<br />
						C'est dÃ©cider, vous ne laisserez pas le gÃ©nÃ©ral Legacy piller les ressources vos clusters<br />
						<br />
						<a href="#/3">Aller demander conseil Ã  Gandalf</a>
						<aside class="notes">
							Vous avez un sprint soit moins de 50 min pour rÃ©soudre cela... 
						</aside>
					</section>
				</section>
				<!-- 3 -->
				<section data-background-image="images/midjourney-labo.png" data-background-size="50%" data-background-opacity="0.8">
					<!--
						source: https://www.midjourney.com/app/jobs/2309e9b9-a0fa-4081-ab37-5be6a11f5f52/
						authors: midjourney, louidji
						prompt:  photo, medieval style, a laboratory filled with flasks and books. There is also a large table containing test tubes, pipettes, parchment and other alchemical tools. Smoke billows from a tube on the table. 
					-->
					<h3>Les conseils de Gandalf</h3>
					<br />
					Vous allez trouver votre mentor et ami Gandalf dans son laboratoire.<br />
					ğŸ§™â€â™‚ï¸<br />
					<pre>
	Jeune ami, hÃ©berger des applications Legacy dans un cluster n'est pas sans risque.

	Rassures-toi, je vais t'aider, mais avant, j'aimerais que tu prennes conscience des dangers qui t'attendent.
					</pre>
				</section>
				
				<!--
Netpol : Dans un cluster installÃ© avec les rÃ©glages par dÃ©faut, un pod (une application), peut parler avec

AccÃ¨s aux logs, aux secrets, ...

Resources Quota / Limit 

Ressources "cluster"
-> CRD
-> CSI, ...

Ressources namespaces mais avec effet de bord : Ingress

Gestion des maj avec ce qui est deprecated

Mise en place de rÃ¨gles qui impose des bonnes pratiques (tag des images, sondes, requests)



				-->

				<!-- 4 -->
				<section data-background-image="images/midjourney-gandalf-reading.png" data-background-size="50%">
					<!--
						source: https://www.midjourney.com/app/jobs/1484255b-7d1f-40df-8829-d5752b21e56f/
						authors: midjourney, louidji
						prompt: photo Gandalf is standing in front of an open book, flipping through the pages and looking like he's thinking. 
					-->
					<!-- 0 -->
					<section>
						<h3>Formation accÃ©lÃ©rÃ©e</h3>
						<br />
						En guise d'entrainement Gandalf va vous mettre Ã  l'Ã©preuve.<br />
						<br />
						<a href="#/4/1">Tentez de rÃ©pondre aux questions de Gandalf</a>
						<aside class="notes">
							Il vous pose quelques questions en ouvrant un livre
						</aside>
					</section>
					<!-- 1 -->
					<section>
						<h3>Un petit didacticiel pour acquÃ©rir les connaissances de l'aventurier dÃ©butant</h3>
						<br />
						<p>
							Dans ce quizz Ã©ducatif les bonnes rÃ©ponses sont primÃ©es. <br />
							Pour le contexte vous utilisez un k8s "standard" (sans configuration et sÃ©curisation spÃ©cifiques)
						</p>
						<a href="#/4/2">Commencez le quizz</a>
						<aside class="notes">					
						</aside>
					</section>

					<!-- 2 -->
					<section>
						<h3>Question 1/5: Qu'est ce qu'un Node ?</h3>
						<p>
							<ul>
								<li><a href="#/4/3">A: Un truc en JS, mais moi je touche pas au JS donc je ne suis pas sÃ»r</a></li>
								<li><a href="#/4/3">B: C'est un container applicatif qui tourne dans une machine</a></li>
								<li><a href="#/4/3">C: Comme le disque (C:)</a></li>
								<li><a href="javascript:void(0)" onclick="resolveAndGo('#/4/4', 1, 1)">D: C'est une machine du cluster k8s</a></li>
							</ul>
						</p>
						<aside class="notes">
						</aside>
					</section>

					<!-- 3 -->
					<section>
						<h3>Fail ğŸƒ</h3>
						<br />
						<a href="#/5">Aller Ã  l'Ã©preuve 2</a>
						<aside class="notes">
						</aside>
					</section>
					
					<!-- 4 -->
					<section>
						<h3>Win ğŸ’ª</h3>
						<br />
						<a href="#/5">Aller Ã  l'Ã©preuve 2</a>
						<aside class="notes">
						</aside>
					</section>
				</section>

				<!-- 5 -->
				<section data-background-image="images/midjourney-gandalf-reading.png" data-background-size="50%">
					<!-- 0 -->
					<section>
						<h3>Question 2/5: Qu'est qu'un Namespace ?</h3>
						<p>
							<ul>
								<li><a href="javascript:void(0)" onclick="resolveAndGo('#/5/2', 1, 1)">A: Une faÃ§on de sÃ©parer les ressources dans un cluster k8s</a></li>
								<li><a href="#/5/2">B: Une faÃ§on de sÃ©parer les ressources dans Linux</a></li>
								<li><a href="#/5/1">C: Le nom d'un amas de constellations dans l'univers de Star Trek</a></li>
								<li><a href="#/5/1">D: Un mot anglais pour dÃ©signer le besoin d'espace quand vos proches voisins ont mangÃ© des pÃ¢tes au pistou</a></li>
							</ul>
						</p>
						<aside class="notes">
							Plusieurs rÃ©ponses sont possibles, mais mÃªme si la rÃ©ponse B est juste elle ne rapporte rien				
						</aside>
					</section>
					<!-- 1 -->
					<section>
						<h3>Fail ğŸƒ</h3>
						<br />
						<a href="#/6">Aller Ã  l'Ã©preuve 3</a>
						<aside class="notes">
						</aside>
					</section>
					<!-- 2 -->
					<section>
						<h3>Win ğŸ’ª</h3>
						<br />
						<a href="#/6">Aller Ã  l'Ã©preuve 3</a>
						<aside class="notes">
						</aside>
					</section>
				</section>

				<!-- 6 -->
				<section data-background-image="images/midjourney-gandalf-reading.png" data-background-size="50%">
					<section>
						<h3>Question 3/5: Quelles ressources ne sont pas partageables entre Pods d'un mÃªme Node ?</h3>
						<p>
							<ul>
								<li><a href="#/6/1">A: Les processeurs</a></li>
								<li><a href="#/6/1">B: La RAM</a></li>
								<li><a href="#/6/1">C: Le kernel</a></li>
								<li><a href="#/6/2">D: Le whisky</a></li>
								<li><a href="javascript:void(0)" onclick="resolveAndGo('#/6/2', 1, 1)">E: L'adresse IP</a></li>
							</ul>
						</p>
						<aside class="notes">
						</aside>
					</section>
					<!-- 1 -->
					<section>
						<h3>Fail ğŸƒ</h3>
						<br />
						<a href="#/7">Aller Ã  l'Ã©preuve 4</a>
						<aside class="notes">
						</aside>
					</section>
					<!-- 2 -->
					<section>
						<h3>Win ğŸ’ª</h3>
						<br />
						<a href="#/7">Aller Ã  l'Ã©preuve 4</a>
						<aside class="notes">
						</aside>
					</section>
				</section>


				<!-- 7 -->
				<section data-background-image="images/midjourney-gandalf-reading.png" data-background-size="50%">
					<section>
						<h3>Question 4/5: Est-ce qu'un Pod peut ?</h3>
						<p>
							<ul>
							<li><a href="javascript:void(0)" onclick="resolveAndGo('#/7/2', 1, 1)">A: Faire des requÃªtes vers un autre pod dans le mÃªme namespace ?</a></li>
							<li><a href="javascript:void(0)" onclick="resolveAndGo('#/7/2', 1, 1)">B: Faire des requÃªtes vers un autre pod dans un autre namespace ?</a></li>
							<li><a href="#/7/1">C: Partager l'ip d'un pod dans le namespace ?</a></li>
							<li><a href="#/7/1">D: Devenir groot sur le Node ?</a></li>
							</ul><br />
							(2 rÃ©ponses)
						</p>
						<br />
						<aside class="notes">
							Plusieurs rÃ©ponses sont possibles
						</aside>
					</section>
					<!-- 1 -->
					<section>
						<h3>Fail ğŸƒ</h3>
						<br /><a href="#/7">Revenir</a> pour votre seconde rÃ©ponse ou 
						<a href="#/8">aller Ã  l'Ã©preuve 5</a>
						<aside class="notes">
						</aside>
					</section>
					<!-- 2 -->
					<section>
						<h3>Win ğŸ’ª</h3>
						<br />
						<br /><a href="#/7">Revenir</a> pour votre seconde rÃ©ponse ou 
						<a href="#/8">aller Ã  l'Ã©preuve 5</a>
						<aside class="notes">
						</aside>
					</section>
				</section>


				<!-- 8 -->
				<section data-background-image="images/midjourney-gandalf-reading.png" data-background-size="50%">
					<section>
						<h3>Question 5/5: Est-ce que je peux restreindre les ressources utilisÃ©es par les pods ?</h3>
						<p>
							<ul>
							<li><a href="#/8/1">A: Oui, grÃ¢ce Ã  l'article 47-1</a></li>
							<li><a href="#/8/1">B: Non, kube c'est l'anarchie</a></li>
							<li><a href="javascript:void(0)" onclick="resolveAndGo('#/8/2', 1, 1)">C: Oui, les quotas et les limites Ã§a existe aussi dans kube</a></li>
							<li><a href="#/8/2">D: Vous voulez pas un whisky avant ?</a></li>
							</ul>
						</p>
						<br />
						<aside class="notes">
						</aside>
					</section>

					<!-- 1 -->
					<section>
						<h3>Fail ğŸƒ</h3>
						<a href="#/9">Pour conclure jeune padawan...</a>
						<aside class="notes">
						</aside>
					</section>
					<!-- 2 -->
					<section>
						<h3>Win ğŸ’ª</h3>
						<br />
						<a href="#/9">Pour conclure jeune padawan...</a>
						<aside class="notes">
						</aside>
					</section>
					</section>
				</section>


				<!-- 9 -->
				<section data-background-image="images/midjourney-labo.png" data-background-size="50%" data-background-opacity="0.8">
					<section>
						<h3>Un cluster Ã  manager implique de grandes responsabilitÃ©s</h3>
						<br />
						En plus des problÃ©matiques prÃ©cÃ©dentes, il faut aussi prendre en compte:
						<p>
							<ul>								
								<li>La gestion des montÃ©es de version des clusters</li>
								<li>Les conflits possibles sur les ressources partagÃ©es comme les urls pour les Ingress </li>
								<li>Les ressources des projets qui seraient globales pour le cluster (CRD, ....)? </li>
								<li>...</li>
							</ul>
						</p>
						Riche de ce nouveau savoir vous pouvez <a href="#/10">retourner Ã  la taverne</a> pour commencer l'aventure
						<aside class="notes">
						</aside>
					</section>
				</section>

				<!-- 10 -->
				<section>
					<!-- 10.0 -->
					<section data-background-image="images/midjourney-tavern.png" data-background-size="50%">
						<!-- 
							source: https://www.midjourney.com/app/jobs/8fc23964-0b8e-484b-b29d-5efb36488c22/
							authors: midjourney / louidji
							prompt:  style mÃ©dieval, tolkien, une agrÃ©able taverne, propre, lumineuse oÃ¹ il fait bon vivre. Il y a 5 tables, 1 elfe, 2 humains et 1 hobbit et 1 nain. Ils sont de bonne humeur. Un barde humain est train de raconter une histoire. 
	
						-->
						<h3>De retour Ã  la taverne</h3>
						<br />
						Le dÃ©fi est trop important pour l'affronter seul dans le temps imparti, heureusement, il y a des hÃ©ros en devenir parmi vous.<br />
						<br />
						Vous pouvez choisir un compagnon pour vous accompagner dans cette aventure.<br />
						Choisissez bien parmi les 3 personnages prÃªts Ã  vous suivre<br />
						<br />
						Chacun d'eux a des caractÃ©ristiques et capacitÃ©s diffÃ©rentes.
						<!-- TODO Image des 3 perso en vignette -->
						<aside class="notes">
						</aside>
					</section>
					<!-- 10.1 -->
					<section>
						<h3>Capsule, le hobbit roublard</h3>
						<img src="images/midjourney-capsule.png" /> 
						<!--
							source: https://www.midjourney.com/app/jobs/8398992a-19c9-41fd-95c7-176f39794325/
							authors: midjourney / louidji
							prompt: Photo, In a medieval tavern, alone at a table, there is the hobbit Meriadoc Brandebouc, wearing a cloak, his face is handsome and partly hidden by his dark cloak

						-->
						<br />
						<aside class="notes">
						</aside>
					</section>
					<!-- 10.2 -->
					<section>
						<h3>Vcluster, la magicienne elfe</h3>
						<img src="images/midjourney-vcluster.png" /> 
						<!--
							source: https://www.midjourney.com/app/jobs/4f154822-cc28-455d-be4b-a4a4f140e212/
							authors: midjourney / louidji
							prompt: Photo. In a bright medieval tavern, alone at a table, there is keke Palmer, an elf magician. She has long black hair. She's wearing a magician's dress

						-->
						<br />
						<aside class="notes">
						</aside>
					</section>
					<!-- 10.3 -->
					<section>
						<h3>Capi, le guerrier nain</h3>
						<img src="images/midjourney-capi.png" /> 
						<!--
							source: https://www.midjourney.com/app/jobs/fa86952b-76b3-478f-904d-739017c413e5/
							authors: midjourney / louidji
							prompt:  Photo. In a medieval tavern, alone at a table, young John Rhys - Davies, a strong dwarf warrior with red hair and a long beard. His face is serious. He's tattooed. He wears chain mail. 

						-->
						<br />
						<aside class="notes">
						</aside>
					</section>
					<!-- 10.4 -->
					<section>
						<h3>Qui vous aidera dans cette aventure ?</h3>
						<table>
							<tr>
								<td><a href="#/11"><img src="images/midjourney-capsule-nobg.png" width="85%"/></a></td>
								<td><a href="#/12"><img src="images/midjourney-vcluster-nobg.png" /></a></td>
								<td><a href="#/13"><img src="images/midjourney-capi-nobg.png" /></a></td>
							</tr>
							<tr class="small">
								<td>ğŸª¢ Il vous attache et vous limite dans un namespace</td>
								<td>ğŸª„ Elle provisionne des "virtual" cluster dans un cluster</td>
								<td>ğŸ—ï¸ Il forge une infra et y provisionne un cluster</td>
							</tr>
						</table>
						<br />
						<aside class="notes">
						</aside>
					</section>
				</section>
				
				<!-- 11 -->
				<section>
					<!-- 0 -->
					<section data-background-image="images/midjourney-capsule-nobg.png" data-background-size="48%" data-background-position="bottom">
						<h3>Capsule, le hobbit roublard</h3>
						<br />
						<table>
							<thead>
								<tr>
									<th><b>Forces</b></th>
									<th><b>Faiblesses</b></th>
								</tr>
							</thead>
							<tbody class="small">
								<tr>
									<td>TrÃ¨s Rapide</td>
									<td>Faible isolation</td>
								</tr>
								<tr>
									<td>LÃ©gÃ¨retÃ©</td>
									<td>Beaucoup de ressources clusters partagÃ©s</td>
								</tr>
								<tr>
									<td>SimplicitÃ©</td>
									<td>Gestion des droits limitÃ©s</td>
								</tr>
							</tbody>
						</table>

						<aside class="notes">
							
						</aside>
					</section>
					
					<!-- 1 -->
					<section>
						<h3>Architecture</h3>
						<div class="flex-container">
							<div style="flex-shrink: 10;">								
								Capsule offre une notion de Tenant au sein d'un cluster.<br />
								Chaque Tenant est associÃ© Ã  un ou plusieurs users et permet de crÃ©er un ou plusieurs namespaces.<br />
								Les uesrs du tenant n'ont des droits que dans ces namespaces.<br />
								Capsule s'appuie sur : RBAC, les Network Policies, les Quotas, ... pour isoler/limiter les tenants.<br />
							</div>
							<div style="flex-grow:10">
								<img src="images/capsule-operator.jpg" />
							</div>
						</div><br />

						<div class="small">source: https://capsule.clastix.io/docs/</div>
						       
						<aside class="notes">														
						</aside>
					</section>

					<!-- 2 -->
					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Initialisation</h3>
						La premiÃ¨re Ã©tape consiste Ã  installer l'operator avec ses CRDs<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/11/3', 1, 1)">AprÃ¨s avoir rÃ©solue cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
							https://capsule.clastix.io/docs/general/getting-started
						</aside>
					</section>
					
					<!-- 3 -->
					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Instanciation du Tenant</h3>
						<ul>
							<li>CrÃ©er le "Tenant" (Tenant.capsule.clastix.io/v1beta2)</li>
							<li>CrÃ©er le user du "Tenant" et crÃ©er son kubeconfig</li>
							<li>CrÃ©er un namespace avec ce user</li>
						</ul><br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/11/4', 1, 1)">AprÃ¨s avoir rÃ©solue cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
						</aside>
					</section>
					
					<!-- 4 -->
					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Mise en place de ArgoCD</h3>
						Compte tenu de l'architecture il n'est pas possible d'avoir un ArgoCD installÃ© pour chaque Tenant.<br />
						Mais l'on peut avoir un ArgoCD externe (ou pas) qui dÃ©ploie pour le(s) namespaces(s) en utilisant un compte avec des droits.<br />
						Sauf que cela entraine une forte complexitÃ©e et une charge de mise en place plus importante (utilisation des Projects,...) . Et vous n'avez pas encore le niveau pour cela, aller directement 
						<a href="#/11/5")">Ã  la fin de l'histoire</a>
						<aside class="notes">
							La sÃ©curisation d'ArgoCD n'est pas traitÃ© ici. C'est hors pÃ©rimÃ¨tre mÃªme si cela pourrait ce faire via les "Projects"<br />
							Une des limitations est notament que ArgoCD gÃ¨re des clusters, pas des Tenant. Du coup il faut avoir un cluster et gÃ©rer les liens entres les "Server + NS" <=> "Repositories" via des "Projects"
						</aside>
					</section>
					
					<!-- 5 -->
					<section data-background-image="images/midjourney-kubernetes-kingdom-raining.png" data-background-size="50%">
						<!--
							source: https://www.midjourney.com/app/jobs/4f154822-cc28-455d-be4b-a4a4f140e212/
							authors: midjourney / louidji

						-->

						<h3>Limitations</h3>
						Bravo vous avez rÃ©ussit Ã  mettre en place un systÃ¨me lÃ©ger de Tenant au sein de kubernetes, mais vous n'avez ni le niveau ni l'envie d'intÃ©grer ArgoCD. <br />
						Sachez que d'autres voies existent, elles sÃ©curisent plus votre cluster et vous permettent d'intÃ©grer facilement ArgoCD.<br />
						<a href="#/14">Allez fÃªter votre premier pseudo kube as a service</a>
						<aside class="notes">
							Parlez des forces et faiblesses et des risques sur l'isolation et les mises Ã  jours et les ressources partagÃ©es.
							Regarder la partie avancÃ© : https://capsule.clastix.io/docs/general/mtb/#allow-self-service-management-of-roles (permet d'avoir par tenant ses netpol, ...)
						</aside>
					</section>
				</section>


				<!-- 12 -->
				<section>
					<!-- 0 -->
					<section data-background-image="images/midjourney-vcluster-nobg-alt.png" data-background-size="57%" data-background-position="bottom">
						<h3>Vcluster, la magicienne elfe</h3>
						<br />
						<table>
							<thead>
								<tr>
									<th><b>Forces</b></th>
									<th><b>Faiblesses</b></th>
								</tr>
							</thead>
							<tbody class="small">
								<tr>
									<td>1 tenant = 1 controle plane</td>
									<td>RÃ©seau partagÃ©</td>
								</tr>
								<tr>
									<td>Rapide Ã  mettre en place</td>
									<td>Le cluster hÃ´te a accÃ¨s aux vclusters</td>
								</tr>
								<tr>
									<td>Bonne isolation (Ã  la carte)</td>
									<td></td>
								</tr>
							</tbody>
						</table>
						
						<aside class="notes">
							L'infrastructure est partagÃ© par dÃ©faut mais ont peut avoir des Nodes dÃ©diÃ©s (le mode d'isolation le plus fort)
						</aside>
					</section>
					
					<!-- 1 -->
					<section>
						<h3>Architecture</h3>
						<div class="flex-container">
							<div style="flex-shrink: 10;">								
								Vcluster permet d'avoir par namespace dÃ©diÃ© du "host" cluster un "virtual" cluster. <br />
								Ce virtual cluster Ã  son control plane et ses propres ressources.<br />
								Le network est partagÃ© et l'on peut voir les pods du vcluster comme une "projection" des pods sur l'hÃ´te<br />
							</div>
							<div style="flex-grow:10">
								<img src="images/vcluster-architecture.png" />
							</div>
						</div><br />
						<div class="small">source: https://www.vcluster.com/docs/what-are-virtual-clusters</div>
						       
						<aside class="notes">
							Les nodes sont par dÃ©faut partagÃ©s mais l'on peut avoir des nodes dÃ©diÃ© aux vcluster via un mÃ©canisme s'appuyant sur les nodeSelector (en transparent pour les vclusters)<br />
							Certaines ressources sont synchroniser sur l'hÃ´te d'autres non, c'est souvent paramÃ©trable<br />
							PrÃ©cision importante : si chaque vcluster a son control plane, le scheduler est par dÃ©faut globale (mais on peut changer cela)<br />
							On peut choisir diffÃ©rentes distribution de k8s pour nos vclusters.
						</aside>
					</section>

					<!-- 2 -->
					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Instanciation</h3>
						Au commencement il y a eu la ligne de commande....<br /> 
						Elle s'appelait vcluster.... <br />
						Et elle crÃ©a son premier virtual cluster<br />
						<br />
						<div class="small">â„¹ï¸ pour ceux qui prÃ©fÃ¨rent il est possible d'utiliser Helm en lieu est place de la ligne de commande, c'est mÃªme mieux en terme de pratiques</div>
						<a href="javascript:void(0)" onclick="resolveAndGo('#/12/3', 1, 2)">AprÃ¨s avoir rÃ©solue cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
							On pourrait aussi utiliser Helm, c'est ce qui est fait pour la crÃ©ation, par contre la cmd line offre plus de fonctionnalitÃ©es <br />
							Ici on va pour se simplifier la partie rÃ©seau (exposition de l'IngressController) utiliser un ingress controller commun, mais ce n'est pas obligÃ©
						</aside>
					</section>
					
					<!-- 3 -->
					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Mise en place de ArgoCD</h3>
						Compte tenu de l'architecture on peut avoir un ArgoCD dÃ©diÃ© par Tenant.<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/12/4', 1, 1)">AprÃ¨s avoir rÃ©solue cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
							La sÃ©curisation d'ArgoCD n'est pas traitÃ© ici. C'est hors pÃ©rimÃ¨tre<br />
						</aside>
					</section>
					
					<!-- 4 -->
					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Tests</h3>
						En utilisant l'Ingress Controller commun au cluster (mais ce n'est pas une obligation, c'est un raccourci) installer l'application de test Hello Legacy.<br />
						Si l'on veut utiliser les CRD (IngressRoute, ...) d'un traefik sur le host il y a mÃ©canisme de synchronisation un peu complexe Ã  mettre en place entre le vcluster et l'host.
						<a href="javascript:void(0)" onclick="resolveAndGo('#/12/5', 1, 1)">ğŸ‘‰ quand vous aurez finit ğŸ‘ˆ</a>
						<aside class="notes">
							Il faudrait installer un ingress controller et l'exposer Ã  l'extÃ©rieur.<br />							
						</aside>
					</section>
					
					<!-- 5 -->
					<section data-background-image="images/midjourney-kubernetes-kingdom-rainbow.png" data-background-size="50%">
						<!--
							source: https://www.midjourney.com/app/jobs/784dcce3-a901-42ac-9949-c980c5ee48ce/
							authors: midjourney / louidji

						-->
						<h3>Limitations</h3>
						ğŸª„ Bravo vous avez rÃ©ussit Ã  mettre en place un systÃ¨me lÃ©ger, qui rÃ©utilise votre infrastructure et vous permet d'offrir des clusters dÃ©diÃ©s aux autres projets.<br />
						<br />
						Vous avez cependant quelques ressources communes mais rien de bloquant<br />
						<a href="#/14">Allez fÃªter votre premier kube as a service</a>
						<aside class="notes">
							Les ressources communes sont les nodes et le rÃ©seau mais : l'on peut avoir des quotas, de networkpolicy et l'on peut mÃªme avoir des nodes spÃ©cialisÃ©s. La seul choses que l'on ne peut pas vraiement avoir en dÃ©diÃ© c'est le CNI.
							Regarder la partie avancÃ© : https://www.vcluster.com/docs/operator/security#advanced-isolation
						</aside>
						<aside class="notes">
						</aside>
					</section>
				</section>


				<!-- 13 -->
				<section>
					<!-- 0 -->
					<section data-background-image="images/midjourney-capi-nobg-alt.png" data-background-size="54%" data-background-position="bottom">
						<h3>Capi, le guerrier nain</h3>
						<br />
						<table>
							<thead>
								<tr>
									<th><b>Forces</b></th>
									<th><b>Faiblesses</b></th>
								</tr>
							</thead>
							<tbody class="small">
								<tr>
									<td>Isolation complÃ©te !</td>
									<td>Demande plus d'infrastructure</td>
								</tr>
								<tr>
									<td>Projet promÃ©teur</td>
									<td>Lent Ã  mettre en place</td>
								</tr>
								<tr>
									<td>Un grand nombre de provider</td>
									<td>Encore en alpha (mais pas tout)</td>
								</tr>
							</tbody>
						</table>
						
						<aside class="notes">
							Capi pour Cluster API<br />
							CAPI peut Ãªtre vu comme une approche portable pour boostraper l'infrastructure et l'installation des clusters. Une sorte de complÃ©ment Ã  kubeadm qui l'on peut brancher Ã  diffÃ©rents providers d'infrastructure et que l'on peut utiliser avec kubeadm ou autre chose.
						</aside>
					</section>
					
					<!-- 1 -->
					<section>
						<h3>Architecture</h3>
						<div class="flex-container">
							<div style="flex-shrink: 10;">								
								La Cluster API permet d'installer un cluster avec une infrastructure dÃ©diÃ©e chez diffÃ©rents providers.<br />
								Cela s'appuie sur un kube d'administration qui sera en capacitÃ© de piloter l'infrastructure cible (crÃ©er des vm, vpc, ...) et de bootstraper le cluster dans cette infrastructure comme Ã©tant une ressource k8s.<br />								
							</div>
							<div style="flex-grow:10">
								<img src="./images/capi-management-cluster.jpg" />
							</div>
						</div><br />
						<div class="small">source: https://cluster-api.sigs.k8s.io/user/concepts.html</div>
						<aside class="notes">
							CAPI fournit de nouveaux CRDs pour dÃ©finir au sein de ce cluster l'infrastruture et les clusters. Cela permet de gÃ©rer des Cluster comme l'on gÃ¨re un Deployement (ou presque).<br />
							=> magie des boucles de controle de kube, de la notion d'Ã©tat dÃ©sirÃ©, ... <br />
							CAPI peut supporter de nombreuses implÃ©mentations (cf https://cluster-api.sigs.k8s.io/reference/providers.html)
							<ul>
								<li>Fournisseur d'infrastructure (AWS, GCP, Openstack, Vsphere, VCluster, ...)</li>
								<li>Boostrap et control plane du cluster (kubeadm, k3s, talos, ...)</li>
							</ul>
						</aside>
					</section>
					
					<!-- 2 -->
					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Initialisation</h3>
						Dans la mythologie Naine, Ã  la naissance du monde, Dieu crÃ©a un cluster de management. Ce cluster pÃ¨re de tous les cluster initialisa ses providers.<br />
						Puis il enfanta de nouveaux clusters pour peupler les zones, les rÃ©gions et continents que lui offrait ses providers.<br />
						<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/13/3', 1, 1)">AprÃ¨s avoir rÃ©solue cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
						</aside>
					</section>

					<!-- 3 -->
					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Instanciation</h3>
						Et aprÃ¨s une longue gestation le cluster de management devient pÃ¨re d'un nouveau cluster.... <br />
						<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/13/4', 1, 2, -5)">AprÃ¨s avoir rÃ©solue cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
						</aside>
					</section>

					<!-- 3 -->
					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Mise en place des composants de base</h3>
						Votre cluster est encore trÃ¨s jeune et peu expÃ©rimenter, il va falloir lui apprendre Ã  marcher<br />
						<ul>
							<li>Installer Traefik (Ingress Controller)</li>
							<li>Installer ArgoCD</li>
						</ul> <br />
						<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/13/5', 1, 1)">AprÃ¨s avoir rÃ©solue cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
							La sÃ©curisation d'ArgoCD n'est pas traitÃ© ici. C'est hors pÃ©rimÃ¨tre<br />
							Attention si kube >=1.24 et selon la version de argocd on peut avoir un soucis avec le service account (plus de secret avec le token par dÃ©fault) => crÃ©er un SA avec le token qui va bien 
							https://foxutech.medium.com/how-to-add-external-cluster-to-argocd-eba2a70f9368 vers 13:00
						</aside>
					</section>

					<!-- 4 -->
					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Tests</h3>
						Installez et testez l'application Hello Legacy !<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/13/6', 1, 1)">ğŸ‘‰ quand vous aurez finit ğŸ‘ˆ</a>
						<aside class="notes">
						</aside>
					</section>

					<!-- 5 -->
					<section data-background-image="images/midjourney-kubernetes-kingdom-rainbow.png" data-background-size="50%">
						<!--
							source: https://www.midjourney.com/app/jobs/784dcce3-a901-42ac-9949-c980c5ee48ce/
							authors: midjourney / louidji

						-->
						<h3>Limitations</h3>
						ğŸ›¡ï¸ğŸ’« Bravo vous avez rÃ©ussit Ã  mettre en place un systÃ¨me robuste et isolÃ© qui vous permet d'offrir des clusters dÃ©diÃ©s aux autres projets.<br />
						<br />
						Vous avez consommer cependant un peu plus d'infrastructure que prÃ©vu, mais rien de bloquant<br />
						<a href="#/14">Allez fÃªter votre premier kube as a service</a>
						<aside class="notes">
							A noter que la solution est encore en alpha et ou beta selon les ressources/implementations, c'est un peu risquer d'industrialiser cela tant que ce n'est Ã  minima pas en beta.
						</aside>
					</section>
				</section>

				<!-- 14 -->
					<section data-background-image="images/midjourney-end.png" data-background-size="50%">
						<!--
							source: https://www.midjourney.com/app/jobs/4e3cd4cb-a054-494d-853f-0f43e7fd7f1e/
							authors: midjourney / louidji

						-->
					<h3>Fin du second tome</h3>
					<br />
            Merci Ã  vous pour votre participation ğŸ¤—<br />
					<br />
					<div id="final-score" class="score">vous devriez recommencer car rien n'est en production.</div>
         			<br />
				</section>
				<!-- 15 -->
				<section data-background-image="images/midjourney-resume-triptic.png" data-background-size="86%" data-background-opacity="0.4">
					<h6>Ecran du MJ</h6>
					<table class="small black-shadow">
						<thead class="small">
							<tr>
								<th style="text-align: center;"></th>
								<th style="text-align: center;">Capsule</th>
								<th style="text-align: center;">VCluster</th>
								<th style="text-align: center;">Cluster API</th>
							</tr>
						</thead>
						<tbody class="small">
							<tr>
								<td><b>StratÃ©gie</b></td>
								<td class="small">Isolation dans un (ou plusieurs) namespace en s'appuyant sur les mÃ©canismes classiques de kubernetes (RBAC, Quota, Limit, NetworkPolicy).<br />
									Les users sont limitÃ©s aux ressources "namespaces"</td>
								<td class="small">CrÃ©ation d'un cluster dans un cluster avec ressources "low" et "high" level.<br />
									Les ressources "low level" sont gÃ©rÃ©es par le cluster hÃ´te, les ressource "high level" sont gÃ©rÃ©s par le cluster "virtuel"
								</td>
								<td class="small">Une nouvelle infrastructure est crÃ©Ã©e via un provider d'infrastructure (gcp, azure, aws, OpenStack, vSphere, vcluster ğŸ˜œ, ...).<br />
									Le cluster est provisionnÃ© via un bootstrap provider (kubeadm, talos, ...) et un control plane provider (kubeadm, talos, ...) </td>
							</tr>
							<tr>
								<td><b>FonctionnalitÃ©s ğŸ’ªğŸ½</b></td>
								<td class="small">ğŸŸ©ğŸŸ¥ğŸŸ¥ğŸŸ¥<br/>
									L'utilisateur du Tenant a accÃ¨s aux ressources de son namespace, il n'a pas accÃ¨s aux ressources "cluster" et ne peut pas ajouter de CRD ou autres ressources custom (il ne peut pas installer ArgoCD par exemple)</td>
								<td class="small">ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ¥<br/>
									L'utilisateur peut quasiment tout faire en dehors de ce qui concerne les composants "d'infrastructure": CNI, hostpath,...</td>
								<td class="small">ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©<br/>
									With great power comes great responsibility</td>
							</tr>
							<tr>
								<td><b>Mutualisation/Optimisation des ressources ğŸ’°</b></td>
								<td class="small">ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©<br/>
									Utilise un cluster existant et install un operateur en plus.</td>
								<td class="small">ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ¥<br/>
									Utilise un cluster existant et install pour chaque vcluster les composants: k3s, coredns, syncer</td>
								<td class="small">ğŸŸ¥ğŸŸ¥ğŸŸ¥ğŸŸ¥<br/>
									Chaque nouveau cluster est un nouveau cluster. Il y a en plus un cluster de management (qui peut Ãªtre mutualisÃ©)</td>
							</tr>
							<tr>
								<td><b>Isolation/SecuritÃ© ğŸ›¡ï¸</b></td>
								<td class="small">ğŸŸ©ğŸŸ¥ğŸŸ¥ğŸŸ¥<br/>
									On partage le cluster mais l'on peut appliquer des contraintes Ã  ce partage</td>
								<td class="small">ğŸŸ©ğŸŸ©ğŸŸ¥ğŸŸ¥<br/>
									On partage le cluster mais l'on peut gÃ©rer plus finement que Capsule les ressources que l'on veut partager</td>
								<td class="small">ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©<br/>
									C'est un cluster dÃ©diÃ© ğŸ˜‰</td>
							</tr>
							<tr>
								<td><b>Vitesse de crÃ©ation ğŸš€</b></td>
								<td class="small">ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©</td>
								<td class="small">ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ¥</td>
								<td class="small">ğŸŸ©ğŸŸ¥ğŸŸ¥ğŸŸ¥</td>
							</tr>
						</tbody>
					</table>
				</section>

				<!-- 16 -->
				<section>
					<table class="small">
						<thead>
							<tr>
								<th colspan="2" style="text-align: center;">RÃ©fÃ©rences ğŸ“–</th>
							</tr>
						</thead>
						<tbody class="small">
							<tr>
								<td>ArgoCD ğŸ«¶</td>
								<td>https://argo-cd.readthedocs.io/en/stable/</td>
							</tr>
							<tr>
								<td>k3d</td>
								<td>https://github.com/k3d-io/k3d/<td>
							</tr>
							<tr>
								<td>kind</td>
								<td>https://kind.sigs.k8s.io/<td>
							</tr>
							<tr>
								<td>Traefik ğŸ’</td>
								<td>https://traefik.io/<td>
							</tr>
							<tr>
								<td>Capsule</td>
								<td>https://capsule.clastix.io/<td>
							</tr>
							<tr>
								<td>Vcluster ğŸ’š</td>
								<td>https://www.vcluster.com/<td>
							</tr>
							<tr>
								<td>Cluster API</td>
								<td>https://cluster-api.sigs.k8s.io//<td>
							</tr>
							<tr>
								<td>Google Cloud Plateform</td>
								<td>https://cloud.google.com/<td>
							</tr>
							<tr>
								<td>Midjourney ğŸ¤©</td>
								<td>https://www.midjourney.com/app/<td>
							</tr>
							<tr>
								<td>PrÃ©sentation et dÃ©mos</td>
								<td>https://github.com/louiznk/kaas-heroes.git<td>
							</tr>
							<tr>
								<td>Deploy Sith</td>
								<td>https://github.com/louiznk/deploy-sith.git<td>
							</tr>
						</tbody>
					</table>
          			<p>
						<!--
						<img src="images/openfeedback.png" style="max-width:50%;height: auto;width:10%; vertical-align: middle;">
						-->
						Merci de vos Feedback ğŸ’ <!-- <u class="red">https://bit.ly/kaas-heros</u> -->
						</img>
					</p>
				</section>
			</div>
			<div class="footer">
				@_louidji
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script src="plugin/zoom/zoom.js"></script>

		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/

			Reveal.initialize({
				hash: true,
				autoPlayMedia: true,

				history: true,

				//width: 1400,
				//height: 800,
				width: 1600,
				height: 920,

				// Factor of the display size that should remain empty around
				// the content
				margin: 0.04,

				// Bounds for smallest/largest possible scale to apply to content
				minScale: 0.2,
				maxScale: 2.0,

				controls: false,
				// Slide number "speaker" : speaker view | "all"
				progress: "all",
				slideNumber: 'c/t',
				showSlideNumber: 'speaker view',

				// 17:30 max sur les slides => 2:00 sur les questions (sur dernier slides) => 19:30
				totalTime: 1170,
				
				// pdf all fragments in the same page
				pdfSeparateFragments: false,
				pdfMaxPagesPerSlide: 1,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealHighlight, RevealNotes, RevealZoom ]
			});

		</script>
		<script type="text/javascript" src="js/level.js"></script>
		<script type="text/javascript" src="js/timer.js"></script>
	</body>
</html>
