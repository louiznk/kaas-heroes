<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png">
		<title>Votre propre kube as a service ? Une aventure dont vous Ãªtes le hÃ©ros...</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/night.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">

		<style>
			body, .reveal {
				background-image: url(images/slide-background-znk.png);
				background-size: auto 100%;
				background-repeat: no-repeat;
			}
			.reveal li {
				font-size: 0.9em;
			}
			.reveal table th, .reveal table td {
				border-bottom: none;
			}
			.left {
				text-align: left;
				padding-left: 20px;
				padding-right: 20px;
			}
			.right {
				text-align: right;
				padding-left: 20px;
				padding-right: 20px;
			}
			.avatar {
				min-width: 7em;
			}
			.header {				
				padding: 10px;
				text-align: center;
				font-size: 66%;
			}
			.header-inner {				
				display: inline-block;
				padding: 10px;
			}
			.footer {				
				text-align: center;
				font-size: 50%;
				font-style: italic;
				position:absolute;
				right: 10px;
				bottom: 10px;
			}
			.very-small {
				font-size: 0.4em;
			}
			.small {
				font-size: 0.8em;
			}
			.big {
				font-size: 2em;
			}
			.img-rounded {
  				border-radius: 50%;
			}
			.reveal .aligncenter {
				margin: 10px auto 20px;
    			display: block;
			}
			.hide {
				display: none;
				visibility: hidden;
			}
			.show {
				visibility: visible;
			}
			.finish {
				color: red;
				font-weight: bold;
				font-size:24px;
			}
			.alerte {
				color: red;
				font-weight: bold;
			}
			.warning {
				color: coral;
			}
			.lvl-up {
				position: absolute;
				box-sizing: border-box;
				top: 20%;
				left: 50%;
				text-align: center;
				transform: translate(-50%, -50%);
				font-size: 200%;
			}
			.lvl-down {
				position: absolute;
				box-sizing: border-box;
				top: 20%;
				left: 50%;
				text-align: center;
				transform: translate(-50%, -50%);
				font-size: 200%;
			}
			.score {
				color: rgb(250, 250, 250);
				font-size: 1.1em;
			}
			.red {
				color: red
			}
			.blue {
				color: blue
			}
			.background-contrast {
				background-color:  #e7ad52;
				background-color:  grey;
				opacity: .8;
			}
			.white {
				color: white
			}
			.shell {
				font-family: monospace;
				font-size: 0.8em;
				color: beige;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="header">
				<div id="timer" class="header-inner">â³...</div>
				<div id="label-container" class="show header-inner">Level: 0, gold: 10</div>
			</div>
			<div class="slides">

				<div id="label-level" class="hide" /></div>

				<!-- 0 -->
				<section>
					<h2>Votre propre kube as a service ?</h2>
					<h3>Une aventure dont vous Ãªtes le hÃ©ros...</h3>
					<img src="images/jdr.png"/><br>
					Une collection Folio DevOps
					<p class="small">
						Revue des lecteurs/joueurs <u class="red">https://bit.ly/kaas-heros</u> <br />
					</p>
					<aside class="notes">
					</aside>
				</section>
				<!-- 1 -->
				<section>
					<img src="images/twitter.png" style="margin: 0;" /><span style="font-size: 1.2em;"> @_louidji</span>
					<table>
						<tbody>
							<tr>
								<td><img src="images/louis.png" class="img-rounded aligncenter avatar"/></td>
							</tr>
							<tr>
								<td style="text-align: center;">Louis Tournayre @ Zenika Lyon &<br />GDG Cloud & IoT Lyon</td>
							</tr>
						</tbody>
					</table>
					<br>
					<aside class="notes">
						J'aurai le plaisir d'Ãªtre le MJ de cette partie de Dev And Deploy
					</aside>
				</section>
				<!-- 2 -->
				<section data-background-image="images/tavern.png" data-background-size="65%">
					<!-- 
						TODO : refaire la taverne

						style mÃ©dieval, une agrÃ©able taverne, propre, lumineuse oÃ¹ il fait bon vivre, les nains, elfes, humains et hobbits y sont bien et de bonne humeur. 
						Il y a a boire et Ã  manger, un sanglier est en train de cuire sur une broche.
						Un barde est train de racconter une histoire.
					-->
					<section>
						<h3>Un nouvelle aventure</h3>
						<br />
						Il Ã©tait une fois le vaste royaume de <b>Kubernetes</b>, dans ce royaume existait un petit namespace qui avait pour capitale <b>le site</b> (et pas le sith).<br /><br />

						Ce nouveau territoire inspire et fait des envieux dans le royaume de l'infrastructure...
						
						<aside class="notes">
							Vous avez un sprint soit moins de 50 min pour rÃ©soudre cela... 
						</aside>
					</section>
					<section>
						<h3>Contenir l'invasion du Legacy</h3>
						<br />
						La guilde des dÃ©cideurs a dÃ©cider que ce royaume sera occupÃ© par... ses armÃ©es d'applications Legacy !<br />

						Tout en obeissant Ã  la guilde des dÃ©cideurs il va falloir protÃ©ger vos clusters et votre site qui vous ont demandÃ© tant d'effort<br />
						<br />
						C'est dÃ©cider, vous ne laisserez pas le gÃ©nÃ©ral Legacy piller les ressources vos clusters<br />
						<br />
						<a href="#/3">Aller demander conseil Ã  Gandalf</a>
						<aside class="notes">
							Vous avez un sprint soit moins de 50 min pour rÃ©soudre cela... 
						</aside>
					</section>
				</section>
				<!-- 3 -->
				<section data-background-image="images/labo.png" data-background-size="65%">
					<!-- TODO image 
					style mÃ©dieval, un laboratoire remplie de flacons et de livres. Il y a aussi un grande table sur laquelle on retrouve des Ã©prouvettes, pipettes, parchemin et d'autres outils d'alchimie. De la fumÃ©e sort d'un tube sur la table.
					-->
					<h3>Les conseils de Gandalf</h3>
					<br />
					Vous allez trouver votre mentor et ami Gandalf dans son laboratoire.<br />
					ğŸ§™â€â™‚ï¸<br />
					<pre>
	Jeune ami, hÃ©berger des applications Legacy dans un cluster n'est pas sans risques.

	Rassures toi, je vais t'aider, mais avant, j'aimerai que tu prennes conscience des dangers qui t'attendent.
					</pre>
				</section>
				
				<!--
Netpol : Dans un cluster installÃ© avec les rÃ©glages par dÃ©faut, un pod (une application), peut parler avec

AccÃ¨s aux logs, aux secrets, ...

Resources Quota / Limit 

Ressources "cluster"
-> CRD
-> CSI, ...

Ressources namespaces mais avec effet de bord : Ingress

Gestion des maj avec ce qui est deprecated

Mise en place de rÃ¨gles qui impose des bonnes pratiques (tag des images, sondes, requests)



				-->

				<!-- 4 -->
				<section data-background-image="images/livre.png" data-background-size="60%">
<!--
	Gandalf est devant un livre ouvert, il feuillette les pages et Ã  l'air de rÃ©flÃ©chir

-->
					<!-- 0 -->
					<section>
						<h3>Formation accÃ©lÃ©rÃ©e</h3>
						<br />
						Avant de ce lancer Gandalf va vous Ã©prouver.<br />
						<br />
						<a href="#/4/1">Tentez de rÃ©pondre aux questions de Gandalf</a>
						<aside class="notes">
							Il vous pose quelques questions en regardant un livre
						</aside>
					</section>
					<!-- 1 -->
					<section>
						<h3>Un petit didacticiel pour acquÃ©rir les connaissances de l'aventurier dÃ©butant</h3>
						<p class="small">Dans ce quizz Ã©ducatif les bonnes rÃ©ponses sont primÃ©es. <br />
							Pour le contexte vous utilisez un k8s "standard" (sans configuration et sÃ©curisation spÃ©cifiques)</p>
						<p>Question 1/5: Qu'est ce qu'un Node ?</p>			
						<ul>
							<li><a href="#/4/2">A: Un truc en JS, mais moi je touche pas au JS donc je suis pas sÃ»r</a></li>
							<li><a href="#/4/2">B: C'est un container applicatif qui tourne dans une machine</a></li>
							<li><a href="#/4/2">C: Comme le disque (C:)</a></li>
							<li><a href="javascript:void(0)" onclick="resolveAndGo('#/4/3', 1, 1)">D: C'est une machine du cluster k8s</a></li>
						</ul>
						<aside class="notes">					
						</aside>
					</section>
					<!-- 2 -->
					<section>
						<h3>Fail ğŸƒ</h3>
						<br />
						<a href="#/5">Aller Ã  l'Ã©preuve 2</a>
						<aside class="notes">
						</aside>
					</section>
					<!-- 3 -->
					<section>
						<h3>Win ğŸ’ª</h3>
						<br />
						<a href="#/5">Aller Ã  l'Ã©preuve 2</a>
						<aside class="notes">
						</aside>
					</section>
				</section>

				<!-- 5 -->
				<section data-background-image="images/livre.png" data-background-size="60%">
					<!-- 0 -->
					<section>
						<h3>Question 2/5: Qu'est qu'un Namespace ?</h3>
						<ul>
							<li><a href="javascript:void(0)" onclick="resolveAndGo('#/5/2', 1, 1)">A: Une faÃ§on de sÃ©parer les ressources dans un cluster k8s</a></li>
							<li><a href="#/5/2">B: Une faÃ§on de sÃ©parer les ressources dans Linux</a></li>
							<li><a href="#/5/1">C: Le nom d'un amas de constellations dans l'univers de Star Trek</a></li>
							<li><a href="#/5/1">D: Un mot anglais pour dÃ©signer le besoin d'espace quand vos proches voisins ont mangÃ© des pattes au pistou</a></li>
						</ul>

						<aside class="notes">
							Plusieurs rÃ©ponses sont possibles, mais mÃªme si la rÃ©ponse B est juste elle ne rapporte rien				
						</aside>
					</section>
					<!-- 1 -->
					<section>
						<h3>Fail ğŸƒ</h3>
						<br />
						<a href="#/6">Aller Ã  l'Ã©preuve 3</a>
						<aside class="notes">
						</aside>
					</section>
					<!-- 2 -->
					<section>
						<h3>Win ğŸ’ª</h3>
						<br />
						<a href="#/6">Aller Ã  l'Ã©preuve 3</a>
						<aside class="notes">
						</aside>
					</section>
				</section>

				<!-- 6 -->
				<section data-background-image="images/livre.png" data-background-size="60%">
					<section>
						<h3>Question 3/5: Quelles ressources ne sont pas partagÃ©s/partageables entre Pods d'un mÃªme Node ?</h3>
						<p>
							<ul>
								<li><a href="#/6/1">A: Les processeurs</a></li>
								<li><a href="#/6/1">B: La RAM</a></li>
								<li><a href="#/6/1">C: Le kernel</a></li>
								<li><a href="#/6/2">D: Le whisky</a></li>
								<li><a href="javascript:void(0)" onclick="resolveAndGo('#/6/2', 1, 1)">E: L'adresse IP</a></li>
							</ul>
						</p>
						<br />
						<aside class="notes">
						</aside>
					</section>
					<!-- 1 -->
					<section>
						<h3>Fail ğŸƒ</h3>
						<br />
						<a href="#/7">Aller Ã  l'Ã©preuve 4</a>
						<aside class="notes">
						</aside>
					</section>
					<!-- 2 -->
					<section>
						<h3>Win ğŸ’ª</h3>
						<br />
						<a href="#/7">Aller Ã  l'Ã©preuve 4</a>
						<aside class="notes">
						</aside>
					</section>
				</section>


				<!-- 7 -->
				<section data-background-image="images/livre.png" data-background-size="60%">
					<section>
						<h3>Question 4/5: Est-ce qu'un Pod peut ?</h3>
						<p>
							<ul>
							<li><a href="javascript:void(0)" onclick="resolveAndGo('#/7/2', 1, 1)">A: Faire des requÃªtes vers un autre pod dans le namespace ?</a></li>
							<li><a href="javascript:void(0)" onclick="resolveAndGo('#/7/2', 1, 1)">B: Faire des requÃªtes vers un pod dans un autre namespace ?</a></li>
							<li><a href="#/7/1">C: Partager l'ip d'un pod dans le namespace ?</a></li>
							<li><a href="#/7/1">D: Devenir groot sur le Node ?</a></li>
							</ul><br />
							(2 rÃ©ponses)
						</p>
						<br />
						<aside class="notes">
							Plusieurs rÃ©ponses sont possibles
						</aside>
					</section>
					<!-- 1 -->
					<section>
						<h3>Fail ğŸƒ</h3>
						<br /><a href="#/7">Revenir</a> pour votre seconde rÃ©ponse ou 
						<a href="#/8">aller Ã  l'Ã©preuve 5</a>
						<aside class="notes">
						</aside>
					</section>
					<!-- 2 -->
					<section>
						<h3>Win ğŸ’ª</h3>
						<br />
						<br /><a href="#/7">Revenir</a> pour votre seconde rÃ©ponse ou 
						<a href="#/8">aller Ã  l'Ã©preuve 5</a>
						<aside class="notes">
						</aside>
					</section>
				</section>


				<!-- 8 -->
				<section data-background-image="images/livre.png" data-background-size="60%">
					<section>
						<h3>Question 5/5: Est-ce que je peux restreindre les ressources utilisÃ©es par les pods ?</h3>
						<p>
							<ul>
							<li><a href="#/8/1">A: Oui, grÃ¢ce Ã  l'article 47-1</a></li>
							<li><a href="#/8/1">B: Non, kube c'est l'anarchie</a></li>
							<li><a href="javascript:void(0)" onclick="resolveAndGo('#/8/2', 1, 1)">C: Oui, les quotas et les limites Ã§a existe aussi dans kube</a></li>
							<li><a href="#/8/2">D: Vous voulez pas un whisky avant ?</a></li>
							</ul>
						</p>
						<br />
						<aside class="notes">
						</aside>
					</section>

					<!-- 1 -->
					<section>
						<h3>Fail ğŸƒ</h3>
						<a href="#/9">Et sachez que</a>
						<aside class="notes">
						</aside>
					</section>
					<!-- 2 -->
					<section>
						<h3>Win ğŸ’ª</h3>
						<br />
						<a href="#/9">Et sachez que</a>
						<aside class="notes">
						</aside>
					</section>
					</section>
				</section>


				<!-- 9 -->
				<section data-background-image="images/labo.png" data-background-size="60%">
					<section>
						<h3>Un cluster Ã  manager implique de grandes responsabilitÃ©s</h3>
						<br />
						En plus des problÃ©matiques prÃ©cÃ©dentes, il faut aussi rÃ©flÃ©chir
						<p>
							<ul>								
								<li>Ã€ la gestion des montÃ©es de version des clusters</li>
								<li>Aux conflits possible sur les ressources partager comme les urls pour les Ingress </li>
								<li>Aux ressources des projets qui seraient globales pour le cluster (CRD, ....)? </li>
								<li>...</li>
							</ul>
						</p>
						<a href="#/10">Retournez Ã  la taverne pour commencer l'aventure</a>
						<aside class="notes">
						</aside>
					</section>
				</section>

				<!-- 10 -->
				<section>
					<!-- 10.0 -->
					<section data-background-image="images/tavern.png" data-background-size="75%">
						<h3>De retour Ã  la taverne</h3>
						<br />
						Heureusement, il y a des hÃ©ros en devenir parmis vous.<br />
						<br />
						Mais vous pouvez choisir un seul compagnon pour vous accompagner dans cette aventure.<br />
						Choissez bien parmis les 3 personnages prÃªt Ã  vous suivre<br />
						<br />
						Chacun d'eux a des caractÃ©ristiques et capacitÃ©s diffÃ©rentes.
						<!-- TODO Image des 3 perso en vignette -->
						<aside class="notes">
						</aside>
					</section>
					<!-- 10.1 -->
					<section>
						<h3>Kiosk, le hobit roublard</h3>
						<img src="images/TODO.png" /> 
						<!--
							Dans une tavern mÃ©dÃ©vial, seul Ã  une table, il y a un hobbit, portant une cape, son visage est beau et est en partie dissimulÃ© par sa cape, il a une dague Ã  la ceinture, porte des vÃªtements sombre.

							In a medieval tavern, alone at a table, there is a hobbit, wearing a cloak, his face is handsome and partly hidden by his cloak, he has a dagger in his belt and is wearing dark clothes.
						-->
						<br />
						<aside class="notes">
						</aside>
					</section>
					<!-- 10.2 -->
					<section>
						<h3>Vcluster, la magicienne elfe</h3>
						<img src="images/TODO.png" /> 
						<!--
							Dans une tavern mÃ©dÃ©vial, seul Ã  une table, il y a une magicienne illusionniste elfe. Sa peau est dorÃ©e, elle a de long cheveux noir. Un bÃ¢ton est posÃ© Ã  cÃ´tÃ© d'elle.

							In a medieval tavern, alone at a table, there's an elf illusionist magician. Her skin is golden and she has long black hair. A staff lies beside her.
						-->
						<br />
						<aside class="notes">
						</aside>
					</section>
					<!-- 10.3 -->
					<section>
						<h3>Capi, le guerrier nain</h3>
						<img src="images/TODO.png" /> 
						<!--
							Dans une taverne mÃ©diÃ©vale, seul Ã  une table, il y a un guerrier nain en armure, il est armÃ© avec un bouclier et une hache, son visage est sÃ©rieux, il a des cicatrices de guerre et il est tatouÃ©.
							
							In a medieval tavern, alone at a table, there is a dwarf warrior in armour, armed with a shield and an axe, his face is serious, he has battle scars and he is tattooed.
						-->
						<br />
						<aside class="notes">
						</aside>
					</section>
					<!-- 10.4 -->
					<section>
						<h3>Qui serez vous dans cette aventure ?</h3>
						<table>
							<tr>
								<td><a href="#/11"><img src="images/pj-capsule.png" /></a></td>
								<td><a href="#/12"><img src="images/pj-vcluster.png" /></a></td>
								<td><a href="#/13"><img src="images/pj-capi.png" /></a></td>
							</tr>
						</table>
						<img src="images/TODO.png" /> 
						<!--
							Faire une image avec les trois personnages et 3 choix en bas
						-->
						<br />
						<aside class="notes">
						</aside>
					</section>
				</section>
				
				<!-- 11 -->
				<section>
					<!-- 0 -->
					<section data-background-image="images/tavern.png" data-background-size="75%">
						<h3>Capsule, le hobit roublard</h3>
						<br />
						<table>
							<tr>
								<td><b>Forces</b></td>
								<td><b>Faiblesses</b></td>
							</tr>
							<tr>
								<td>TrÃ¨s Rapide</td>
								<td>Faible isolation</td>
							</tr>
							<tr>
								<td>LÃ©gÃ¨retÃ©</td>
								<td>Beaucoup de ressources clusters partagÃ©s</td>
							</tr>
							<tr>
								<td>SimplicitÃ©</td>
								<td>Gestion des droits limitÃ©s</td>
							</tr>
						</table>

						<aside class="notes">
							
						</aside>
					</section>
					
					<!-- 1 -->
					<section>
						<h3>Architecture</h3>
						Capsule offre du multitenant au sein d'un cluster en s'appuyant sur les namespaces.<br /> Il utilise notamment les rÃ¨gles RBAC, les Network Policies et les Resources Quotas pour protÃ©ger les tenants.<br />
						<img src="https://capsule.clastix.io/assets/static/capsule-operator.d853076.ce76636fce3e3130134a6f768700f6f7.svg" />
						<!-- TODO local image -->
						<div class="small">source: https://capsule.clastix.io/docs/</div>
						       
						<aside class="notes">														
						</aside>
					</section>

					<!-- 2 -->
					<section>
						<h3>Initialisation</h3>
						La premiÃ¨re Ã©tape consiste Ã  installer l'operator avec ses CRDs<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/11/3', 1, 1)">AprÃ¨s avoir rÃ©solue cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
							https://capsule.clastix.io/docs/general/getting-started
						</aside>
					</section>
					
					<!-- 3 -->
					<section>
						<h3>Instanciation du Tenant</h3>
						<ul>
							<li>CrÃ©er le "Tenant" (Tenant.capsule.clastix.io/v1beta2)</li>
							<li>CrÃ©er le user du "Tenant" avec son kubeconfig</li>
						</ul><br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/11/4', 1, 1)">AprÃ¨s avoir rÃ©solue cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
						</aside>
					</section>
					
					<!-- 4 -->
					<section>
						<h3>Mise en place de ArgoCD</h3>
						Compte tenu de l'architecture il est trop compliquÃ© d'avoir un ArgoCD dÃ©diÃ© par Tenant, le plus simple est d'avoir un ArgoCD capable de deployer dans les diffÃ©rents Tenant.<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/11/5', 1, 1)">AprÃ¨s avoir rÃ©solue cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
							La sÃ©curisation d'ArgoCD n'est pas traitÃ© ici. C'est hors pÃ©rimÃ¨tre<br />
							Apparment Flux s'intÃ©gre dans des tenants Capsules<br />
							Attention si kube >=1.24 et selon la version de argocd on peut avoir un soucis avec le service account (plus de secret avec le token par dÃ©fault) => crÃ©er un SA avec le token qui va bien 
							https://foxutech.medium.com/how-to-add-external-cluster-to-argocd-eba2a70f9368 vers 13:00
						</aside>
					</section>
					
					<!-- 5 -->
					<section>						
						<h3>DÃ©ployer l'application de test</h3>
						En utilisant l'Ingress Controller commun au cluster<br>
						<a href="javascript:void(0)" onclick="resolveAndGo('#/11/6', 1, 1)">ğŸ‘‰ quand vous aurez finit ğŸ‘ˆ</a>
						<aside class="notes">
						</aside>
					</section>
					
					<!-- 6 -->
					<section>
						<h3>Limitations</h3>
						Bravo vous avez rÃ©ussit Ã  mettre en place un systÃ¨me lÃ©ger de Tenant au sein de kubernetes, mais d'autres voies existent et sÃ©curisent plus pour votre cluster....<br />
						<a href="#/14">Allez fÃªter votre premier pseudo kube as a service</a>
						<aside class="notes">
							Parlez des forces et faiblesses et des risques sur l'isolation et les mises Ã  jours et les ressources partagÃ©es.
							Regarder la partie avancÃ© : https://capsule.clastix.io/docs/general/mtb/#allow-self-service-management-of-roles (permet d'avoir par tenant ses netpol, ...)
						</aside>
					</section>
				</section>


				<!-- 12 -->
				<section>
					<!-- 0 -->
					<section data-background-image="images/tavern.png" data-background-size="75%">
						<h3>Vcluster, la magicienne elfe</h3>
						<br />
						<table>
							<tr>
								<td><b>Forces</b></td>
								<td><b>Faiblesses</b></td>
							</tr>
							<tr>
								<td>1 tenant = 1 controle plane</td>
								<td>RÃ©seau partagÃ©</td>
							</tr>
							<tr>
								<td>Rapide Ã  mettre en place</td>
								<td>Le cluster hÃ´te a accÃ¨s aux vclusters</td>
							</tr>
							<tr>
								<td>Bonne isolation (Ã  la carte)</td>
								<td></td>
							</tr>
						</table>
						
						<aside class="notes">
							L'infrastructure est partagÃ© par dÃ©faut mais ont peut avoir des Nodes dÃ©diÃ©s (le mode d'isolation le plus fort)
						</aside>
					</section>
					
					<!-- 1 -->
					<section>
						<h3>Architecture</h3>
						Vcluster permet d'avoir dans un namespace dÃ©diÃ© du "host" cluster un (ou plusieurs) "virtual" cluster. <br />
						Ce virtual cluster Ã  son control plane et ses propres ressources.<br />
						Le network est partagÃ© et l'on peut voir les pods du vcluster comme une "projection" des pods sur hÃ´te<br />
						<img src="https://www.vcluster.com/docs/media/diagrams/vcluster-architecture.svg" />
						<!-- TODO local image -->
						<div class="small">source: https://www.vcluster.com/docs/what-are-virtual-clusters</div>
						       
						<aside class="notes">
							Les nodes sont par dÃ©faut partagÃ©s mais l'on peut avoir des nodes dÃ©diÃ© aux vcluster via un mÃ©canisme s'appuyant sur les nodeSelector (en transparent pour les vclusters)<br />
							Certaines ressources sont synchroniser sur l'hÃ´te d'autres non, c'est souvent paramÃ©trable<br />
							PrÃ©cision importante : si chaque vcluster a son control plane, le scheduler est par dÃ©faut globale (mais on peut changer cela)<br />
							On peut choisir diffÃ©rentes distribution de k8s pour nos vclusters.
						</aside>
					</section>

					<!-- 2 -->
					<section>
						<h3>Instanciation</h3>
						Au commencement il y a eu la ligne de commande....<br /> 
						Elle s'appelait vcluster.... <br />
						Et elle crÃ©a son premier virtual cluster<br />
						<br />
						<div class="small">â„¹ï¸ pour ceux qui prÃ©fÃ¨rent il est possible d'utiliser Helm en lieu est place de la ligne de commande, c'est mÃªme mieux en terme de pratiques</div>
						<a href="javascript:void(0)" onclick="resolveAndGo('#/12/3', 1, 1)">AprÃ¨s avoir rÃ©solue cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
							On pourrait aussi utiliser Helm
							Ici on va pour se simplifier la partie rÃ©seau (exposition de l'IngressController) utiliser un ingress controller commun, mais ce n'est pas obligÃ©
						</aside>
					</section>
					
					<!-- 3 -->
					<section>
						<h3>Mise en place de ArgoCD</h3>
						Compte tenu de l'architecture on peut avoir un ArgoCD dÃ©diÃ© par Tenant.<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/12/4', 1, 1)">AprÃ¨s avoir rÃ©solue cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
							La sÃ©curisation d'ArgoCD n'est pas traitÃ© ici. C'est hors pÃ©rimÃ¨tre<br />
							Attention si kube >=1.24 et selon la version de argocd on peut avoir un soucis avec le service account (plus de secret avec le token par dÃ©fault) => crÃ©er un SA avec le token qui va bien 
							https://foxutech.medium.com/how-to-add-external-cluster-to-argocd-eba2a70f9368 vers 13:00
						</aside>
					</section>
					
					<!-- 4 -->
					<section>
						<h3>Tests</h3>
						En utilisant l'Ingress Controller commun au cluster, mais ce n'est pas une obligation, c'est un raccourci.<br>
						<a href="javascript:void(0)" onclick="resolveAndGo('#/12/5', 1, 1)">ğŸ‘‰ quand vous aurez finit ğŸ‘ˆ</a>
						<aside class="notes">
							Il faudrait installer un ingress controller et l'exposer Ã  l'extÃ©rieur
						</aside>
					</section>
					
					<!-- 5 -->
					<section>
						<h3>Limitations</h3>
						ğŸª„ Bravo vous avez rÃ©ussit Ã  mettre en place un systÃ¨me lÃ©ger, qui rÃ©utilise votre infrastructure et vous permet d'offrir des clusters dÃ©diÃ©s aux autres projets.<br />
						<br />
						Vous avez cependant quelques ressources communes mais rien de bloquant<br />
						<a href="#/14">Allez fÃªter votre premier kube as a service</a>
						<aside class="notes">
							Les ressources communes sont les nodes et le rÃ©seau mais : l'on peut avoir des quotas, de networkpolicy et l'on peut mÃªme avoir des nodes spÃ©cialisÃ©s. La seul choses que l'on ne peut pas vraiement avoir en dÃ©diÃ© c'est le CNI.
							Regarder la partie avancÃ© : https://www.vcluster.com/docs/operator/security#advanced-isolation
						</aside>
						<aside class="notes">
						</aside>
					</section>
				</section>


				<!-- 13 -->
				<section>
					<!-- 0 -->
					<section data-background-image="images/tavern.png" data-background-size="75%">
						<h3>Capi, le guerrier nain</h3>
						<br />
						<table>
							<tr>
								<td><b>Forces</b></td>
								<td><b>Faiblesses</b></td>
							</tr>
							<tr>
								<td>Isolation complÃ©te !</td>
								<td>Demande plus d'infrastructure</td>
							</tr>
							<tr>
								<td>Projet promÃ©teur</td>
								<td>Lent Ã  mettre en place</td>
							</tr>
							<tr>
								<td>Un grand nombre de provider</td>
								<td>Encore en alpha</td>
							</tr>
						</table>
						
						<aside class="notes">
							Capi pour Cluster API<br />
							CAPI peut Ãªtre vu comme une approche portable pour boostraper l'infrastructure et l'installation des clusters. Une sorte de complÃ©ment Ã  kubeadm qui l'on peut brancher Ã  diffÃ©rents providers d'infrastructure et que l'on peut utiliser avec kubeadm ou autre chose.
						</aside>
					</section>
					
					<!-- 1 -->
					<section>
						<h3>Architecture</h3>
						La Cluster API permet d'installer un cluster avec une infrastructure dÃ©diÃ©e chez diffÃ©rents providers.<br />
						Cela s'appuie sur un kube d'administration qui sera en capacitÃ© de piloter l'infrastructure cible (crÃ©er des vm, vpc, ...) et de bootstraper le cluster dans cette infrastructure comme Ã©tant une ressource k8s.<br />
						<img src="https://cluster-api.sigs.k8s.io/images/management-cluster.svg" />
						<!-- TODO local image -->
						<div class="small">source: https://cluster-api.sigs.k8s.io/user/concepts.html</div>
						<aside class="notes">
							Il y aura de nouveaux CRDs pour dÃ©finir au sein de ce cluster l'infrastruture et les clusters. Cela permettra de gÃ©rer des Cluster comme l'on gÃ¨re un Deployement (ou presque).<br />
							=> magie des boucles de controle de kube, de la notion d'Ã©tat dÃ©sirÃ©, ...
						</aside>
					</section>
					
					<!-- 1 -->
					<section>
						<h3>Initialisation</h3>
						<aside class="notes">
						</aside>
					</section>
					<!-- 2 -->
					<section>
						<h3>Instanciation</h3>
						<aside class="notes">
						</aside>
					</section>
					<!-- 3 -->
					<section>
						<h3>Tests</h3>
						<aside class="notes">
						</aside>
					</section>
					<!-- 4 -->
					<section>
						<h3>Limitations</h3>
						<aside class="notes">
						</aside>
					</section>
				</section>















<!--


				
				<section data-background-image="images/richardson-kubecon-2.png" data-background-size="60%">

					<section>
						<h3>Une prÃ©sentation de Legolas sur GitOps</h3>
						A la fin de sa prÃ©sentation, Legolas propose aux participants (donc Ã  vous) un petit Ã©chauffement pour comprendre les 
						concepts indispensable pour pouvoir se lancer dans l'aventure GitOps.<br />
						<br />
						<a href="#/5/1">Aller s'entrainer avec Legolas</a>
						<aside class="notes">
							Il vous pose quelques questions pour vous aider Ã  comprendre GitOps
						</aside>
					</section>
					<section>
						<h3>Un petit didacticiel pour acquÃ©rir les rÃ¨gles du GitOps</h3>
						<p class="small">Dans ce quizz Ã©ducatif les bonnes rÃ©ponses sont primÃ©es</p>
						<p>Question 1/5: GitOps c'est quoi d'aprÃ¨s vous ?</p>
						<ul>
							<li><a href="javascript:void(0)" onclick="resolveAndGo('#/5/3', 1, 1)">A: Un plat rÃ©chauffÃ©</a></li>
							<li><a href="#/5/2">B: Un truc rÃ©volutionnaire</a></li>
							<li><a href="#/5/2">C: Une nouvelle destination pour vos vacances</a></li>
							<li><a href="#/5/2">D: Un nouveau framework web</a></li>
						</ul>
						<aside class="notes">
						
						</aside>
					</section>
					<section>
						<h3>Fail ğŸƒ</h3>
						<br />
						<a href="#/6">Aller Ã  l'Ã©preuve 2</a>
						<aside class="notes">
						GitOps n'a rien de nouveau, les objectifs et principes mis en Å“uvre dans GitOps existaient bien avant que le terme ne
						soit inventÃ©...<br />
						Mais ce terme Ã  la mode a permis de renouveler et de diffuser cette pratique. Ce terme est aussi liÃ© avec
						de nouveau outils mais GitOps ne veut pas dire nÃ©cessairement nouveaux outils
						</aside>
					</section>
					<section>
						<h3>Win ğŸ’ª</h3>
						<br />
						<a href="#/6">Aller Ã  l'Ã©preuve 2</a>
						<aside class="notes">
						</aside>
					</section>
				</section>

				<section data-background-image="images/richardson-kubecon-2.png" data-background-size="60%">
					<section>
						<h3>Quelles sont les 2 premiers principes GitOps ?</h3>
						<p>
							<ul>
								<li><a href="#/6/1">A: Le principe, c'est de faire des valeurs</a></li>
								<li><a href="#/6/1">B: On ne passe les commandes Git qu'en ligne de commande</a></li>
								<li><a href="javascript:void(0)" onclick="resolveAndGo('#/6/2', 1, 1)">C: Git est la seul source de vÃ©ritÃ©</a></li>
								<li><a href="#/6/1">D: Chaque branche Git correspond Ã  un environnement diffÃ©rent</a></li>
								<li><a href="javascript:void(0)" onclick="resolveAndGo('#/6/3', 1, 1)">E: Tout est dÃ©crit via des fichiers de manifest</a></li>
								<li><a href="#/6/1">F: Le monde se divise en deux catÃ©gories : ceux qui ont un pistolet chargÃ© et ceux qui creusent. Toi, tu creuses. â›ï¸</a></li>
							</ul>
						</p>
						<br />
						<a href="#/7">Aller Ã  l'Ã©preuve 3</a>
						<aside class="notes">
							C & E permet dâ€™opÃ©rer lâ€™infrastructure en modifiant le code versionnÃ© dans Git
							(4 principes : dÃ©claratif (E) )
						</aside>
					</section>
					<section>
						<h3>Fail ğŸƒ</h3>
						<br />
						<a href="#/6">revenir</a> ou 
						<a href="#/7">aller Ã  l'Ã©preuve 3</a>
						<aside class="notes">
						</aside>
					</section>
					<section>
						<h3>Win ğŸ’ª</h3>
						<br />
						<a href="#/6">revenir</a> ou 
						<a href="#/7">aller Ã  l'Ã©preuve 3</a>
						<aside class="notes">
							Quelle est lâ€™outil majoritairement utilisÃ© pour stocker, versionner, auditer et partager du code : git
						</aside>
					</section>
					<section>
						<h3>Win ğŸ’ª</h3>
						<br />
						<a href="#/6">revenir</a> ou 
						<a href="#/7">aller Ã  l'Ã©preuve 3</a>
						<aside class="notes">
							Dans lâ€™IT toutes applications, infrastructures, tests, ... est dÃ©finie par quelque chose dâ€™interprÃ©table par une machine
							: donc par du code (et si ce nâ€™est pas le cas pb). Et le YAML câ€™est aussi du code ;)
						</aside>
					</section>
				</section>
				<section data-background-image="images/richardson-kubecon-2.png" data-background-size="60%">
					<section>
						<h3>Quâ€™est ce qui est dÃ©crit dans nos repo Git ?</h3>
						<p>
						<ul>
							<li><a href="#/7/1">A: Du YAML et rien que du YAML</a></li>
							<li><a href="javascript:void(0)" onclick="resolveAndGo('#/7/2', 1, 1)">B: L'Ã©tat dÃ©sirÃ© de lâ€™infrastructure</a></li>
							<li><a href="#/7/1">C: Des scripts qui mettent Ã  jours l'infrastructure</a></li>
							<li><a href="#/7/1">D: Des images de chats en ASCII ART ï¼ˆï¼â—•Ï‰â—•ï¼œï¼‰</a></li>
						</ul>
						</p>
						<aside class="notes">
						</aside>
					</section>
					<section>
						<h3>Fail ğŸƒ</h3>
						<a href="#/8">Aller Ã  l'Ã©preuve 4</a>
						<aside class="notes">
							Nous exprimons lâ€™Ã©tat dÃ©sirÃ© que doivent avoir nos infrastructures sous une forme lisible par une machine.<br />
							Il y aura donc un outil qui sâ€™assurera que lâ€™Ã©tat dÃ©sirÃ© et la rÃ©alitÃ© de notre SI convergent. Cet outil va Ãªtre branchÃ©
							sur git. Il pourra Ãªtre notifiÃ© des changements et les rÃ©cupÃ©rer ou aller rÃ©guliÃ¨rement rÃ©cupÃ©rer ces changements.<br />
							<br />
							Un script ne pourra pas avoir toutes les combinatoires possible pour passer d'un Ã©tat Ã  un autre, alors qu'une
							machine pourra calculer les opÃ©ration Ã  faire pour passer d'un Ã©tat Ã  un autre<br />
							La notion d'Ã©tat dÃ©sirÃ© permet en outre de dÃ©tecter des divergences entre l'Ã©tat dÃ©sirÃ© et l'Ã©tat rÃ©el
						</aside>
					</section>
					<section>
						<h3>Win ğŸ’ª</h3>
						<a href="#/8">Aller Ã  l'Ã©preuve 4</a>
						<aside class="notes">
							Cela permettra d'avoir un outil qui sâ€™assurera que lâ€™Ã©tat dÃ©sirÃ© et la rÃ©alitÃ© de notre SI convergent. Cet outil va Ãªtre branchÃ©
							sur git. Il pourra Ãªtre notifiÃ© des changement et les rÃ©cupÃ©rer ou aller rÃ©guliÃ¨rement rÃ©cupÃ©rer ces changements.
						</aside>
					</section>
				</section>
				<section data-background-image="images/richardson-kubecon-2.png" data-background-size="60%">
					<section>
						<h3>Est-ce que je peux opÃ©rer mon infrastructure sans passer par Git ?</h3>
						<p>
							<ul>
								<li><a href="javascript:void(0)" onclick="resolveAndGo('#/8/2', 1, 1)">A: Le monde se divise en deux catÃ©gories : ceux qui ont un pistolet chargÃ© et ceux qui creusent. Toi, tu creuses ta tombe si tu touches Ã  la main Ã  l'infra.</a></li>
								<li><a href="#/8/1">B: Bien sur, I am Groot</a></li>
							</ul>
						</p>
						<aside class="notes">
							La solution GitOps utilisÃ©e doit rÃ©cupÃ©rer les descripteurs de l'Ã©tat dÃ©sirer et les appliquer
						</aside>
					</section>
					<section>
						<h3>Fail ğŸƒ</h3>
						<a href="#/9">Aller Ã  l'Ã©preuve 5</a>
						<aside class="notes">
						</aside>
					</section>
					<section>
						<h3>Win ğŸ’ª</h3>
						<a href="#/9">Aller Ã  l'Ã©preuve 5</a>
						<aside class="notes">
						</aside>
					</section>
				</section>
				<section data-background-image="images/richardson-kubecon-2.png" data-background-size="60%">
					<section>
						<h3>Qu'est ce qui se passe si j'ai mis les doigts dans l'infrastructure ?</h3>
						<p>
							<ul>
								<li><a href="#/9/1">A: <span class="shell">$ sudo bash -c "echo 'Ni vu ni connu...' && whoami && history -c" && history -c</span></a></li>
								<li><a href="javascript:void(0)" onclick="resolveAndGo('#/9/2', 1, 1)">B: Le systeme essaillera de revenir Ã  son Ã©tat dÃ©sirÃ©</a></li>
								<li><a href="#/9/1">C: Groot c'est pas moi, c'est lui ğŸ‘‰</a></li>
							</ul>
						</p>
						<aside class="notes">
							La solution GitOps utilisÃ©e doit rÃ©cupÃ©rer les descripteurs de l'Ã©tat dÃ©sirer et les appliquer
						</aside>
					</section>
					<section>
						<h3>Fail ğŸƒ</h3>
						<a href="#/10">Aller au moment d'Ã©change post meetup</a>
						<aside class="notes">
						</aside>
					</section>
					<section>
						<h3>Win ğŸ’ª</h3>
						<a href="#/10">Aller au moment d'Ã©change post meetup</a>
						<aside class="notes">
						</aside>
					</section>
				</section>
				<section data-background-image="images/tavern.png" data-background-size="75%">
					<section>
						<h3>Au final GitOps c'est...</h3>
						<img src="images/gitops-ring.png" /><br />
						Un repo pour les gouverner tous. Un repo pour les dÃ©tailler. Un repo pour les amener tous et dans kube les
						dÃ©ployer....<br />
						<aside class="notes">
						</aside>
					</section>
					<section>
						<h3>La taverne</h3>
						<p>Vous vous attablez avec Gimli, Legolas et si vous avez passÃ© le niveau 1, vous avez droit Ã  une ğŸ».<br /></p>
						<p>Vous leur demandez de l'aide pour mettre en place GitOps dans votre projet.<br /></p>
						<ul>
							<li><a href="#/11">A: Legolas vous propose son arme favorite : Argo CD</a></li>
							<li><a href="#/12">B: Alors que Gimli vous conseil d'utiliser votre forge pour faire votre arme sur mesure</a></li>
						</ul>
						<br />
						<br />
						Dans tous les cas, Gandalf vous rejoint et vous offre un cluster kube pour pouvoir dÃ©ployer, pour le remercier, c'est votre tournÃ©e <a href="javascript:void(0)" onclick="resolve(0, 0, -3)">[PAYEZ 3 ğŸª™]</a>.
						
						<aside class="notes">
							(Gandalf a crÃ©er le cluster) <br />
							Maintenant il va falloir choisir l'outil ou crÃ©er l'outil. Plusieurs solutions possible : utiliser Argo CD ou crÃ©er son propre outil
						</aside>
					</section>
				</section>
			-->


<!--
				<section>
					<section>
						<h3>Argo CD</h3>
						<blockquote style="margin-top: -5; margin-bottom: 0; align-content: center;">
							<span style="margin-top: 0; margin-bottom: 0; font-size: 0.6em;">Argo CD is a declarative, GitOps continuous delivery tool for Kubernetes.<br /></span>
							<img src="images/argocd_architecture.png" style="margin-top: 0; margin-bottom: 0;"/>
						</blockquote>
						<span style="font-size: 0.6em; margin: 0;">https://argoproj.github.io/cd</span>
						
						<aside class="notes">
						DonnÃ© Ã  la CNCF depuis 2 ansi (April 7, 2020), en status incubator https://www.cncf.io/projects/argo/<br />
						Repos github avec environ 11.000 stars et 2300 forks<br />
						En plus de Argo CD il y a plusieurs projets "Argo"=> Workflow : moteur de worflow; Rollout: deployement en blue-green,
						canary, ...; Events : event driven workflow
						</aside>
					</section>
					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Votre premiÃ¨re mission</h3>
						<br />
						<ul>
							<li>installer et configurer Argo CD,</li>
							<li>s'assurer que la ligne de commande fonctionne,</li>
							<li>s'assurer que l'interface web est accessible au travers d'un Ingress.</li>
						</ul><br />
						<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/13', 1, 3, 3)">AprÃ¨s avoir rÃ©solu cette issue, passer Ã  la prochaine</a>

						<aside class="notes">
							Pour la dÃ©mo tout sera fait en local et l'on aura un seul cluster kube qui hÃ©bergera Argo CD et les dÃ©ployements
						</aside>
					</section>
					
				</section>
				<section>
					<section>
						<h3>Du "sur-mesure" avec la CI de GitLab</h3>
						<aside class="notes">
						</aside>
					</section>

					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Votre premiÃ¨re mission</h3>
						<br />
						<ul>
							<li>installer et configurer un runner GitLab (pour le "groupe" gitlab) qui tourne dans le cluster,</li>
							<li>s'assurer que le runner fonctionne,</li>
							<li>permettre au runner de piloter le cluster k8s.</li>
						</ul><br />
						<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/13', 1, 1)">AprÃ¨s avoir PARTIELLEMENT cette issue, passer Ã  la prochaine</a>
					
						<aside class="notes">
							Le runner pourra lancer des jobs en injectant le kubeconfig local qui lui permettra d'accÃ¨der Ã  l'API server de kube.  
							Pour la dÃ©mo tout sera fait en local et l'on aura un seul cluster kube qui hÃ©bergera GitLab et les dÃ©ployements.  
							C'est une solution Ã  moitiÃ© faite, il manque la boucle de controle
						</aside>
					</section>
				</section>

				<section>
					<section>
						<h3>DÃ©ployer en production des descripteurs versionnÃ©s</h3>
						<br />
						Allons nous enfin pouvoir <a href="#/13/1">dÃ©ployer la production Ã  partir du repository git</a> ? ğŸ¤
						<aside class="notes">
							On va commencer avec un un simple manifest qui sera fournit
						</aside>
					</section>
					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Go to prod depuis Git ğŸ˜± ?</h3>
						<br />
						L'Ã©quipe dev vous a fournit les manifests pour dÃ©ployer l'Application dans la nouvelle infrastructure.<br />
						<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/14', 1, 3, 2)">AprÃ¨s avoir rÃ©solu cette issue, passer Ã  la prochaine</a>
						
						<aside class="notes">
							
						</aside>
					</section>

				</section>

				<section>
					<section>
						<h3>Et si l'on dÃ©ployait d'autres environnements ?</h3>
						<br />
						<span class="big">ğŸ‘¯â€â™‚ï¸</span> <br />
						Maintenant que vous savez dÃ©ployer en production directement depuis git<br />
						<br />
						Comment gÃ¨re-t-on les autres environnements ?
            <br /><br />
						<a href="#/14/1">Aller trouver l'inspiration Ã  la taverne...</a>
						<aside class="notes">
							Non seulement ce serait bien mais ce serait indispensable, vous ne vous voyer pas gÃ©rer diffÃ©rent mode de deployement. <br/>
							Mais cela pose pas mal de questions : comment gÃ©rer les diffÃ©rents env ? =>
						</aside>
					</section>
					<section data-background-image="images/tavern.png" data-background-size="75%">
						<h3>Quel modÃ¨le de configuration pour gÃ©rer nos diffÃ©rents environnements ?</h3>
						<br />
						AprÃ¨s avoir offert plusieurs ğŸº au barde <a href="javascript:void(0)" onclick="resolve(0, 0, -2)">[PAYEZ 2 ğŸª™]</a>, il vous propose de suivre la voie de :
						<br />
						<p>
							<ul>
								<li><a href="#/14/2">A: Kustomize, le guerrier Nain qui refuse le templating</a></li>
								<li><a href="#/14/5">B: Helm, le DÃ©mon du templating go</a></li>
								<li><a href="#/14/9">C: Dhall, le BÃ©ornien qui compile vos configurations</a></li>
							</ul>
						</p>
						<br />
						Qui sera votre modÃ¨le ?
						<aside class="notes">
							Kustomize est un guerrier Nain lÃ©gendaire par sa dÃ©termination et ses principes. 
							Il dÃ©teste le templating qu'il considÃ¨re comme non conforme Ã  l'esprit de kube.<br />
							A contrario, il y aussi le cÃ©lÃ¨bre et dÃ©moniaque Helm qui a le templating qui fait partie de son Ã¢me, de son Ãªtre.<br />
							Et enfin moins connu mais puissant: Dhall, comme tout Beornien c'est un Ãªtre rude, strict et solitaire, mais sur qui l'on peut compter.
						</aside>
					</section>
					<section data-background-image="images/erebor.png" data-background-size="77%">
						<h3>Kustomize</h3>
						<br />
						Une approche dÃ©clarative et sans template.<br />
						<pre>

	â”œâ”€â”€ base
	â”‚Â Â  â”œâ”€â”€ deployment.yml
	â”‚Â Â  â”œâ”€â”€ ingress.yml
	â”‚Â Â  â”œâ”€â”€ kustomization.yml
	â”‚Â Â  â””â”€â”€ svc.yml
	â””â”€â”€ overlays
	  Â  â”œâ”€â”€ moria
	  Â  â”‚Â Â  â”œâ”€â”€ patch.yml
	  Â  â”‚Â Â  â””â”€â”€ kustomization.yml
	  Â  â”œâ”€â”€ erebor
	  Â  â”‚Â Â  â”œâ”€â”€
		...

						</pre>
						<aside class="notes">
							Les environnements sont representÃ©s par des dossiers dans overlays (mais on peut organiser cela autrement)
						</aside>
					</section>
					<section data-background-image="images/erebor.png" data-background-size="77%">
						<h3>Kustomize</h3>
						<br />
						Contenant les dÃ©finitions de "base" et le(s) patch(s) de chaque environnement<br />
						<pre>
							<code data-line-numbers="2-4|8-11|5-7|14,20-21|18-19,22-23">
								<script type="text/template">---
# base kustomize.yml file
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
commonLabels:
	race: dwarf
	job: black-smith
resources:
- deployment.yml
- svc.yml
- ingress.yml

---
# overlay kustomize.yml file for moria env
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: moria
commonLabels:
	env: moria
bases:
- ../../base
patchesStrategicMerge:
- patch.yml
								</script>
							</code>
						</pre>
						<aside class="notes">
							La base et la notion de surcharge sous la forme de fichier(s) de patch sont pilotÃ©s par des fichiers <b>kustomize.yml</b>
						</aside>
					</section>
					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Les mains dans le cambouis : Kustomize</h3>
						<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/15', 1, 3, 5)">AprÃ¨s avoir rÃ©solu cette issue, passer Ã  la prochaine</a>
					</section>
					<section data-background-image="images/balrog.png" data-background-size="77%">
						<h3 style="color: red;">Helm ğŸ”¥</h3>
						<br />
						<span><q>The package manager for Kubernetes</q> (https://helm.sh/)</span> <br />
						
						<span class="small red"><q>L'enfer est pavÃ© de bonnes intentions</q> (Saint-Bernard)</span>
						<br />
						<p>
						Helm, c'est Ã  la fois un systÃ¨me de :<br />
						<ul>
							<li><a href="#/14/6">templating go pour yaml,</a></li> 
							<li>un systÃ¨me de packaging et de partage d'applications kubernetes,</li>
							<li>et un systÃ¨me de gestion de dÃ©pendances pour les applications kube.</li>
						</ul>
						</p>
						<aside class="notes">
							Amibitieu et complexe<br />
							Avec un lourd passif avec Tiller ğŸ˜±<br />
							OÃ¹ il faut aimer le templating GO<br />
							Mais c'est votre choix
						</aside>
					</section>
					<section data-background-image="images/balrog.png" data-background-size="77%">
						<h3 style="color: red;">Helm ğŸ”¥</h3>
						Un <b>Chart <span class="red">helm</span></b> cela ressemble Ã  quoi ?<br />
						<pre>
				â”œâ”€â”€ charts
				â”œâ”€â”€ Chart.yaml
				â”œâ”€â”€ templates
				â”‚Â Â  â”œâ”€â”€ deployment.yaml
				â”‚Â Â  â”œâ”€â”€ _helpers.tpl
				â”‚Â Â  â”œâ”€â”€ hpa.yaml
				â”‚Â Â  â”œâ”€â”€ ingress.yaml
				â”‚Â Â  â”œâ”€â”€ NOTES.txt
				â”‚Â Â  â”œâ”€â”€ serviceaccount.yaml
				â”‚Â Â  â”œâ”€â”€ service.yaml
				â”‚Â Â  â”œâ”€â”€ tests
				â”‚Â Â  â””â”€â”€ test-connection.yaml
				â”œâ”€â”€ values-prod.yaml
				â”œâ”€â”€ values-staging.yaml
				â””â”€â”€ values-....yaml
				
						</pre>
						<aside class="notes">
							Les descripteurs des diffÃ©rents composants sont initializÃ©s par dÃ©faut.<br />
							Ainsi qu'un fichier <b>values.yaml</b> avec les valeurs par dÃ©faut des templates.
						</aside>
					</section>
					<section data-background-image="images/balrog.png" data-background-size="77%">
						<h3 style="color: red;">HğŸ”¥lm</h3>
						<pre>
							<code data-line-numbers="2-4|29,30,34,36,37,40|44-46,53|78">
								<script type="text/template">---
## Chart.yaml file
apiVersion: v2
name: balrog
description: A powerful demonic monster for Kubernetes

# A chart can be either an 'application' or a 'library' chart.
#
# Application charts are a collection of templates that can be packaged into versioned archives
# to be deployed.
#
# Library charts provide useful utilities or functions for the chart developer. They're included as
# a dependency of application charts to inject those utilities and functions into the rendering
# pipeline. Library charts do not define any templates and therefore cannot be deployed.
type: application

# This is the chart version. This version number should be incremented each time you make changes
# to the chart and its templates, including the app version.
# Versions are expected to follow Semantic Versioning (https://semver.org/)
version: 0.1.0

# This is the version number of the application being deployed. This version number should be
# incremented each time you make changes to the application. Versions are not expected to
# follow Semantic Versioning. They should reflect the version the application is using.
# It is recommended to use it with quotes.
appVersion: "1.16.0"

---
## values.yaml file
# Default values for balrog.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
	repository: registry.acdc.song/highway/to-hell
	pullPolicy: IfNotPresent
	# Overrides the image tag whose default is the chart appVersion.
	tag: "666"
# ...

---
## deployement.yml file
apiVersion: apps/v1
kind: Deployment
metadata:
name: {{ include "balrog.fullname" . }}
labels:
	{{- include "balrog.labels" . | nindent 4 }}
spec:
{{- if not .Values.autoscaling.enabled }}
replicas: {{ .Values.replicaCount }}
{{- end }}
selector:
	matchLabels:
	{{- include "balrog.selectorLabels" . | nindent 6 }}
template:
	metadata:
	{{- with .Values.podAnnotations }}
	annotations:
		{{- toYaml . | nindent 8 }}
	{{- end }}
	labels:
		{{- include "balrog.selectorLabels" . | nindent 8 }}
	spec:
	{{- with .Values.imagePullSecrets }}
	imagePullSecrets:
		{{- toYaml . | nindent 8 }}
	{{- end }}
	serviceAccountName: {{ include "balrog.serviceAccountName" . }}
	securityContext:
		{{- toYaml .Values.podSecurityContext | nindent 8 }}
	containers:
		- name: {{ .Chart.Name }}
		securityContext:
			{{- toYaml .Values.securityContext | nindent 12 }}
		image: "{{ .Values.image.repository }}:{{ .Values.image.tag | default .Chart.AppVersion }}"
# ...

								</script>
							</code>
						</pre>
						<aside class="notes">
							Les valeurs templÃ©tisÃ©s sont soient passÃ©es en args soit dans des fichiers
							<b>values-....yml</b> (soit les 2)
						</aside>
					</section>


					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Les mains dans le cambouis : <span class="red">HğŸ”¥lm</span> </h3>
						<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/15', 1, 5, 5)">AprÃ¨s avoir rÃ©solu cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
						</aside>
					</section>

					<section data-background-image="images/Beorn_by_JMKilpatrick.png" data-background-size="40%">
						<h3>Dhall-lang</h3>
						<br />
						<span><q>Dhall is a programmable configuration language...</q> (https://dhall-lang.org/)</span> <br />

						<br />
						<p>
						Dhall-lang est un langage de configuration <b>gÃ©nÃ©rique</b> :<br />
						<ul>
							<li>avec des types dÃ©diÃ©s pour les descripteurs de kubernetes,</li> 
							<li>safe (fonctionnel, typage, ...),</li>
							<li>qui Ã©vite les rÃ©pÃ©tions et facilite la refactorisation,</li>
							<li>mais plus difficile Ã  apprendre que Helm ou Kustomize.</li>
						</ul>
						</p>
						<aside class="notes">
							On peut voir cela comme : du JSON, des types, des fonctions et des imports, le tout validÃ© par un "compilateur".
							En rÃ©sumÃ© du JSON Ã  la sauce Haskell. Soit quelque chose de complexe, de peu utilisÃ©, mais fiable et robuste.
							Ce langage est gÃ©nÃ©rique : on peut s'en servir pour kubernetes mais pas que.
						</aside>
					</section>

					<section data-background-image="images/Beorn_by_JMKilpatrick.png" data-background-size="40%">
						<h3>Dhall-lang</h3>
						Du typage, du templating et un peu d'assemblage<br />
						<pre>
â”œâ”€â”€ assembly-prod.dhall
â”œâ”€â”€ assembly-secret.dhall
â”œâ”€â”€ assembly-....dhall
â”œâ”€â”€ configs
â”‚Â Â  â”œâ”€â”€ prod.dhall
â”‚Â Â  â”œâ”€â”€ staging.dhall
â”‚Â Â  â””â”€â”€ ....dhall
â”œâ”€â”€ templates
â”‚Â Â  â”œâ”€â”€ sith-all-template.dhall
â”‚Â Â  â”œâ”€â”€ sith-deploy-template.dhall
â”‚Â Â  â”œâ”€â”€ sith-ingress-template.dhall
â”‚Â Â  â””â”€â”€ sith-svc-template.dhall
â”œâ”€â”€ tools
â”‚Â Â  â””â”€â”€ converters.dhall
â””â”€â”€ types
  Â  â”œâ”€â”€ sith-config-deploy.dhall
  Â  â”œâ”€â”€ sith-config.dhall
  Â  â”œâ”€â”€ sith-config-ingress.dhall
  Â  â”œâ”€â”€ sith-config-ingress-rule.dhall
  Â  â”œâ”€â”€ ...
  Â  â”œâ”€â”€ sith-config-svc.dhall
  Â  â””â”€â”€ unionType.dhall
						</pre>
						<aside class="notes">
							Mais dhall n'impose aucune structure particuliÃ¨re, Ã  chacun d'avoir son organsition...
						</aside>
						
					</section>
					
					<section data-background-image="images/Beorn_by_JMKilpatrick.png" data-background-size="40%">
						<h3>Dhall-lang</h3>
						<br />
						Mise en oeuvre d'un template simple (un service)<br />
						<pre>
							<code data-line-numbers="3,11|19|22-27|29|36,50|37,32|38,33-34|56">
								<script type="text/template">-- types/sith-config-svc.dhall --
{
	Type =
	{ 
	name: Text,
	app: Text,
	port: Integer,
	targetPort: Optional <Int: Integer | String: Text>,
	portName: Optional Text,
	},
	default =
	{
	portName = None Text,
	targetPort = None <Int: Integer | String: Text>,
	}
}

-- config/staging-svc.dhall --
let ConfigSvc = ../types/sith-config-svc.dhall
let Port : Type = < Int : Integer | String : Text >

let service = ConfigSvc::{
  name = "hello",
  app = "world",
  port = +80,
  targetPort = Some (Port.String "web")
}

in service

-- templates/sith-svc-template.dhall --
let ConfigSvc = ../types/sith-config-svc.dhall
let kubernetes = https://raw.githubusercontent.com/dhall-lang/dhall-kubernetes/v6.0.0/1.21/package.dhall 
		sha256:9d07ad4eff6d388aaf7c4715d3b83812a7eee8a6281a5e64098aaddb3551ce6a

let svc =
  Î»(config : ConfigSvc.Type) â†’
  kubernetes.Service::{
    , metadata = kubernetes.ObjectMeta::{ 
      name = Some config.name, labels = Some (toMap { app = config.app }) 
      }
    , spec = Some kubernetes.ServiceSpec::{
      , ports = Some
        [ kubernetes.ServicePort::{ 
			name = config.portName , targetPort = config.targetPort , port = config.port }
        ]
      , selector = Some (toMap { app = config.app })
    }
  }
in svc

-- ./assembly-demo.dhall --
let configSvc = ./configs/staging-svc.dhall
let templateSvc = ./templates/sith-svc-template.dhall

in templateSvc configSvc
									
								</script>
							</code>
						</pre>
					</section>


					<section data-background-image="images/Beorn_by_JMKilpatrick.png" data-background-size="40%">
						<h3>Dhall-lang</h3>
						<br />
						Utilisation de ce simple template(un service)<br />
						<pre>
							<code> $ dhall-to-yaml --documents --file assembly-demo.dhall 

---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: hello
  name: hello
spec:
  ports:
    - port: 80
      targetPort: web
  selector:
    app: hello 				</code>
						</pre>
					</section>

					<section data-background-image="images/Beorn_by_JMKilpatrick.png" data-background-size="40%">
						<h3>Dhall-lang : comment dÃ©ployer ?</h3>
						<br />
						Pour rÃ©soudre cette issue vous allez avoir besoin d'invoquer l'aide d'un consultant BÃ©ornide. <br />
						<p>
						Ce puissant guerrier :
						<ul>
							<li>mettra en place les types, descripteurs et templates Dhall,</li>
							<li>et intÃ©grera Dhall dans votre solution de dÃ©ploiement.</li>
						</ul>
						</p>
						Cela vous coÃ»tera de trÃ¨s nombreuses tournÃ©es <a href="javascript:void(0)" onclick="resolveAndGo('#/14/14', 0, 0, -10)">[PAYEZ 10 ğŸª™]</a>.<br />
						<br />
						Si vous ne les avez pas faites un <a href="#/14/1">autre choix</a><br /> 
						<br />
						<aside class="notes">
							Argocd gÃ¨re plusieurs systÃ¨mes de deploiement : yaml "vanilla", kustomize, helm, jsonnet, mais pas dhall. 
						</aside>
					</section>
					<section data-background-image="images/des.png" data-background-size="50%">
						<h3>Les mains dans le cambouis : trois tournÃ©es pour qu'ArgoCD intÃ¨gre Dhall</h3>
						<br />
						ArgoCD ne comprend pas Dhall.... Mais notre amis BÃ©ornide peut lui "apprendre" en crÃ©ant un CMP (Config Management Plugin). Cela consiste Ã  :
						<p>	
						<ul>
							<li>installer le plugin via "side-car container" associÃ© Ã  argo-repo-server,</li>
							<li>configurer ce plugin pour qu'il traite les fichiers dhall,</li>
							<li>configurer ArgoCD pour qu'il dÃ©lÃ¨gue les fichiers dhall Ã  ce plugin.</li>
						</ul>
						</p>
						AprÃ¨s cela, nous pourrons deployer les applications dÃ©crites en utilisant Dhall.<br /><br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/15', 1, 5, 5)">AprÃ¨s avoir rÃ©solu cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
							(Argocd gÃ¨re plusieurs systÃ¨mes de deploiement : yaml "vanilla", kustomize, helm, jsonnet, mais pas dhall). 
							
							On peut Ã©tendre argocd via un mÃ©canisme de plugin, avec ce que l'on appel des CMP ou Config Management Plugin.  
							Il y a deux maniÃ¨re de faire cela, dans notre cas nous allons utilisÃ© un mÃ©canisme de side car avec un container side car qui sera ajoutÃ© au pod "argo-repo-server".  
							voir https://argo-cd.readthedocs.io/en/stable/user-guide/config-management-plugins/
						</aside>
					</section>
				</section>

				<section>
					<section data-background-image="images/secret.png" data-background-size="60%">
						<h3>L'application prÃ©sente des FğŸƒilles de sÃ©curitÃ©</h3>
						<br />
						Entre autres, les secrets sont directement dans l'application.<br />
						<br />
						<a href="#/15/1">Demander Ã  Gandalf s'il connaÃ®t un sort d'externalisation des mots de passe</a>
						<aside class="notes">
							Il n'y a pas que log4shell et spring4shell dans l'info...
						</aside>
					</section>
					<section data-background-image="images/tavern.png" data-background-size="75%">
						<h3>La voie du silence</h3>
						Heureusement, Gandalf est lÃ  et vous donne plusieurs directions, choisissez bien...<br />
						<br />
						<ul>
							<li><a href="#/15/2">A: Les "secrets" natifs de kube</a></li>
							<li><a href="#/15/3">B: Le chiffrage dans Git avec bitnami sealed secrets</a></li>
							<li><a href="#/15/4">C: La solution la plus avancÃ©e : Hashicorp Vault</a></li>
							<li><a href="#/17">D: J'ai pas l'temps, pas l'choix faut y aller... ğŸƒ</a></li>
						</ul>
						<aside class="notes">
						</aside>
					</section>
					<section data-background-image="images/secret.png" data-background-size="60%">
						<h3>Les "Secret" selon Kubernetes ğŸ¤¡</h3>
						ğŸš¨ Encoder n'est pas chiffrer<br />
						<pre>
							<code data-line-numbers="4">---
apiVersion: v1
data:
	password: RW5jb2RlciBuJ2VzdCBwYXMgY2hpZmZyZXI=
kind: Secret
metadata:
	name: it-s-a-joke
							</code>
						</pre>
						<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/16', 0, -2)">AprÃ¨s avoir fait semblant de rÃ©soudre cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
							Mais bon, cela rÃ©pond au premier besoin d'externalisation. AprÃ¨s si kustomize on peut utiliser un generator
						</aside>
					</section>
					<section data-background-image="images/secret.png" data-background-size="60%">
						<h3>Sealed Secrets</h3>
						<br />
					  La sÃ©curisation des secrets grÃ¢ce Ã  du chiffrement asymÃ©trique.
						<br />
						<img src="images/crypto-asymetric-fr.png" />
						<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/16', 1, 3, 3)">AprÃ¨s avoir rÃ©solu cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
							https://github.com/bitnami-labs/sealed-secrets
						</aside>
					</section>
					<section data-background-image="images/secret.png" data-background-size="60%">
						<h3>Hashicorp Vault</h3>
            On peut utiliser Vault <br />
						<p>
            			Depuis l'endroit qui dÃ©ploie grÃ¢ce Ã 
							<ul class="small">
								<li>du templating,</li>
								<li>des gÃ©nÃ©rateurs,</li>
								<li>...</li>
							</ul>
						</p>
						<p>
            			Ou depuis le cluster oÃ¹ les secrets sont utilisÃ©s en
							<ul class="small">
								<li>utilisant un "Init" ou un "SideCar" Containers,</li>
								<li>intÃ©grant un client Vault dans l'application,</li>
								<li><b>utilisant "Secrets Store CSI driver" de kube,</b></li>
								<li>...</li>
							</ul>
						</p>
						<br />
						<p class="small">
							MÃªme si c'est la meilleure solution, vous n'avez pas encore le niveau pour cette epic.<br />
							Mais si il vous reste 10po ou plus vous pouvez demander de l'aide Ã  un consultant POC...
						</p>
						<a href="#/15/1">revenir en arriÃ¨re</a> OU <a href="javascript:void(0)" onclick="resolveAndGo('#/15/5', 0, 0, -10)">[PAYEZ 10 ğŸª™]</a>.<br />
						<aside class="notes">
							Quelque soit la solution choisit il faut bien Ã©videment avoir Vault installÃ©.
						</aside>
					</section>
					<section data-background-image="images/secret.png" data-background-size="60%">
						<h3>Hashicorp Vault</h3>
            En utilisant les Secrets Store CSI driver de kube<br />
						<p class="small">
							Le consultant vous fournit un script permettant d'installer et configurer Vault en mode [DEV] dans votre cluster en mode "open bar" 
							<b>ğŸš« Ne faites pas cela ğŸš«</b>
						</p>
						<p class="small">
							Pour monter les secrets Vault utilisez un <b>SecretProviderClass</b> avec un volume <b>csi</b>
						<pre>
							<code data-line-numbers="2,3,7,10|5|12-14|20,21,24">---
	apiVersion: secrets-store.csi.x-k8s.io/v1
	kind: SecretProviderClass
	metadata:
		name: vault-secret-exemple
	spec:
		provider: vault
		parameters:
			roleName: "csi"
			vaultAddress: "http://vault.vault:8200"
			objects: |
				- objectName: "bar"
				  secretPath: "secret/data/foo"
				  secretKey: "password"
---
# pod spec...
...
		volumes:
		- name: secrets-store-exemple
			csi:
				driver: secrets-store.csi.k8s.io
				readOnly: true
				volumeAttributes:
					secretProviderClass: "vault-secret-exemple"
							</code>
						</pre>
						</p>
						<br />
						<a href="javascript:void(0)" onclick="resolveAndGo('#/16', 1, 3, 3)">AprÃ¨s avoir rÃ©solu cette issue, passer Ã  la prochaine</a>
						<aside class="notes">
							<ul class="small">
								<li>dÃ©clarer un "SecretProviderClass" qui sera associÃ© Ã  une plusieurs entrÃ©es Vault,</li>
								<li>dans le pod monter en tant que volume ce volume de type "csi"</li>
							</ul>
						</aside>
					</section>

				</section>

				<section data-background-image="images/des.png" data-background-size="50%">
					<h3>DÃ©ployer la prod sur un tag au lieu de HEAD</h3>
					<br />
					Il s'agit de la derniÃ¨re issue. Elle est optionnelle : <br />
					<br />
					<ul>
						<li><a href="#/17">J'ai pas l'temps, pas l'choix faut y aller... ğŸƒ</a></li>
						<li><a href="javascript:void(0)" onclick="resolveAndGo('#/17', 1, 3, 2)">Trop fort, j'ai eu le temps de la rÃ©soudre</a></li>
					</ul>
					<aside class="notes">
					</aside>
				</section>

				<!-- 17 -->
				<section data-background-image="images/frodo-in-rivendell.png" data-background-size="70%">
					<h3>Fin du second tome</h3>
					<br />
					<span class="background-contrast">
            Merci Ã  vous pour votre participation ğŸ¤—<br />
					</span>
					<br />
					<div id="final-score" class="score"><span class="background-contrast">vous devriez recommencer car rien n'est en production.</span></div>
          <br />
				</section>

				<!-- 18 -->
				<section>
					<table class="small">
						<thead>
							<tr>
								<th colspan="2" style="text-align: center;">RÃ©fÃ©rences ğŸ“–</th>
							</tr>
						</thead>
						<tbody class="small">
							<tr>
								<td>ArgoCD ğŸ«¶</td>
								<td>https://argo-cd.readthedocs.io/en/stable/</td>
							</tr>
							<tr>
								<td>k3d</td>
								<td>https://github.com/k3d-io/k3d/<td>
							</tr>
							<tr>
								<td>kind</td>
								<td>https://kind.sigs.k8s.io/<td>
							</tr>
							<tr>
								<td>Traefik ğŸ’</td>
								<td>https://traefik.io/<td>
							</tr>
							<tr>
								<td>Capsule</td>
								<td>https://capsule.clastix.io/<td>
							</tr>
							<tr>
								<td>Vcluster ğŸ’š</td>
								<td>https://www.vcluster.com/<td>
							</tr>
							<tr>
								<td>Cluster API</td>
								<td>https://cluster-api.sigs.k8s.io//<td>
							</tr>
							<tr>
								<td>Google Cloud Plateform</td>
								<td>https://cloud.google.com/<td>
							</tr>
							<tr>
								<td>PrÃ©sentation et dÃ©mos</td>
								<td>https://github.com/louiznk/...<td>
							</tr>
							<tr>
								<td>Deploy Sith</td>
								<td>https://github.com/louiznk/deploy-sith.git<td>
							</tr>
						</tbody>
					</table>
          <p>
			<img src="images/openfeedback.png" style="max-width:50%;height: auto;width:10%; vertical-align: middle;">
			Merci de vos Feedback ğŸ’ <u class="red">https://bit.ly/kaas-heros</u> 
		  	</img>
          </p>
				</section>
			</div>
			<div class="footer">
				@_louidji
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script src="plugin/zoom/zoom.js"></script>

		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/

			Reveal.initialize({
				hash: true,
				autoPlayMedia: true,

				history: true,

				//width: 1400,
				//height: 800,
				width: 1600,
				height: 920,

				// Factor of the display size that should remain empty around
				// the content
				margin: 0.04,

				// Bounds for smallest/largest possible scale to apply to content
				minScale: 0.2,
				maxScale: 2.0,

				controls: false,
				// Slide number "speaker" : speaker view | "all"
				progress: "all",
				slideNumber: 'c/t',
				showSlideNumber: 'speaker view',

				// 17:30 max sur les slides => 2:00 sur les questions (sur dernier slides) => 19:30
				totalTime: 1170,
				
				// pdf all fragments in the same page
				pdfSeparateFragments: false,
				pdfMaxPagesPerSlide: 1,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealHighlight, RevealNotes, RevealZoom ]
			});

		</script>
		<script type="text/javascript" src="js/level.js"></script>
		<script type="text/javascript" src="js/timer.js"></script>
	</body>
</html>
